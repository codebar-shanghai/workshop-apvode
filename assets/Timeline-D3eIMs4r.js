import{d as $a,r as Va,i as Ya,o as Za,c as Xa}from"./vendor-uZ32emID.js";const Bt=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",ye=document?document.documentElement:null,Ja=Bt?Bt.indexOf("phantom")!==-1:!1,De=window&&"ActiveXObject"in window;De&&Bt.match(/MSIE 9/i);const $e=Bt.indexOf("webkit")!==-1;Bt.indexOf("android");const Ka=Bt.search("android [23]")!==-1,ue=window?typeof window.orientation<"u":!1,Qa=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,ts=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:Qa,pa=window?window.opera:!1;Bt.indexOf("gecko");const be=Bt.indexOf("gecko")!==-1&&!$e&&!pa&&!De;Bt.indexOf("chrome");const es=Bt.indexOf("edge/")!==-1;ye&&De&&"transition"in ye.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;ye&&"MozPerspective"in ye.style;ye&&"OTransition"in ye.style;let $i=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!$i&&window&&"matchMedia"in window){let i=window.matchMedia("(min-resolution:144dpi)");$i=i&&i.matches}const Ut=window&&!window.L_NO_TOUCH&&!Ja&&(ts||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function is(){var i=window.innerWidth,t=window.innerHeight,e="portrait";return i>t&&(e="landscape"),e}function Ae(i){return typeof i=="string"?document.getElementById(i):i}function D(i,t,e){var a=document.createElement(i);return a.className=t,e&&e.appendChild(a),a}function Ee(i,t){var e=D("button",i,t);return e.type="button",e}function yi(i){for(var t={x:0,y:0};i&&!isNaN(i.offsetLeft)&&!isNaN(i.offsetTop);)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;return t}function ga(i){for(var t=document.documentElement.style,e=0;e<i.length;e++)if(i[e]in t)return i[e];return!1}ga(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);ga(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class Q extends Error{constructor(t,e){super(),this.name="TLError",this.message=t||"error",this.message_key=this.message,this.detail=e||""}}const Vi={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function va(i){Vi[i.toLowerCase()]&&(i=Vi[i.toLowerCase()]);var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;i=i.replace(t,function(a,s,o,l){return s+s+o+o+l+l});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function st(i,t){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i}function as(i){return i==null?!1:i==!0||String(i).toLowerCase()=="true"||Number(i)==1}function ge(i){for(var t=Array.prototype.slice.call(arguments,1),e=0,a=t.length,s;e<a;e++)s=t[e]||{},st(i,s);return i}const ya=[];function ss(i){ya.push(i)}function tt(i){ya.forEach(t=>{try{t(i)}catch(e){console&&console.log&&console.log("Error handling trace",e)}})}function Vt(i,t){for(i=String(i),t=t||2;i.length<t;)i="0"+i;return i}const Yi=function(){var i=0,t="_tl_id";return function(e){return e[t]=e[t]||++i,e[t]}}();function Rt(i){return i&&typeof i.replace=="function"?i.replace(/^\s+|\s+$/g,""):""}function Dt(i,...t){for(let a of t)for(var e of Object.getOwnPropertyNames(a.prototype))i.prototype[e]=a.prototype[e]}function ns(i,t){if(t||(t=de(6)),!(t in i))return t;var e=t.match(/^(.+)(-\d+)?$/)[1],a=[];for(let o in i)o.match(/^(.+?)(-\d+)?$/)[1]==e&&a.push(o);t=e+"-"+(a.length+1);for(var s=a.length;a.indexOf(t)!=-1;s++)t=e+"-"+s;return t}function rs(i){var t=[];if(Object.keys)t=Object.keys(i);else for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&t.push(e);for(var a=0;a<t.length;a++){var s=t[a];if(i[s]!=null&&typeof i[s]!="string"||Rt(i[s]).length!=0)return!1}return!0}function oi(i){i=Rt(i),i=i.toLowerCase();for(var t="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",e="aaaaaeeeeeiiiiooooouuuunc------",a=0,s=t.length;a<s;a++)i=i.replace(new RegExp(t.charAt(a),"g"),e.charAt(a));return i=i.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),i=i.replace(/^([0-9])/,"_$1"),i}function de(i,t){var e=function(o){return Math.floor(Math.random()*o)},a=function(){var o="abcdefghijklmnopqurstuvwxyz";return o.substr(e(32),1)},s=function(o){for(var l="",f=0;f<o;f++)l+=a();return l};return t?t+"-"+s(i):"tl-"+s(i)}function os(i,t,e){for(var a=0;a<i.length;a++)if(t<i[a])return i[a];return e||t}function ls(i,t,e){for(var a=i.length-1;a>=0;a--)if(t>i[a])return i[a];return e||t}function hs(i){return i==parseFloat(i)?!(i%2):void 0}function ba(i,t,e,a){for(var s=a||0,o=0;o<t.length;o++)t[o].data[e]==i&&(s=o);return s}function ve(i){return i&&(i=i.replace(/<a\b[^>]*>/i,""),i=i.replace(/<\/a>/i,""),i)}function ds(i,t){i.data=ge({},i.data,t),i.data.unique_id===""&&(i.data.unique_id=de(6))}function cs(i){return i.match(/<p>[\s\S]*?<\/p>/)?i:"<p>"+i+"</p>"}function we(i){return i=i.replace(/(<[^>]*>)+/g,""),i.replace('"',"'")}function bi(i,t,e){var a=function(f,b,v){v||(v="");var g=30;return b&&b.length>g&&(b=b.substring(0,g)+"…"),v+"<a class='tl-makelink' href='"+f+"' onclick='void(0)'>"+b+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,o=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,l=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return i.replace(s,function(f,b,v,g){if(v>0){var _=g[v-1];if(_=='"'||_=="'"||_=="=")return f}return a(f,b)}).replace(o,function(f,b,v,g,_){return a("http://"+v,v,b)}).replace(l,function(f,b,v,g){return a("mailto:"+b,b)})}function Ve(i){return i.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const fe={square:i=>{var t={w:0,h:0};return i.w>i.h&&i.h>0?(t.h=i.h,t.w=i.h):(t.w=i.w,t.h=i.w),t},r16_9:i=>i.w!==null&&i.w!==""?Math.round(i.w/16*9):i.h!==null&&i.h!==""?Math.round(i.h/9*16):0,r4_3:i=>{if(i.w!==null&&i.w!=="")return Math.round(i.w/4*3);if(i.h!==null&&i.h!=="")return Math.round(i.h/3*4)}};function us(i){var t,e=[],a,s;t=i.toString(),t.match("&#038;")?t=t.replace("&#038;","&"):t.match("&#38;")?t=t.replace("&#38;","&"):t.match("&amp;")&&(t=t.replace("&amp;","&")),s=t.slice(t.indexOf("?")+1).split("&");for(var o=0;o<s.length;o++)a=s[o].split("="),e.push(a[0]),e[a[0]]=a[1];return e}function fs(i){var t=[];for(var e in i)i.hasOwnProperty(e)&&t.push(e+"="+i[e]);return"?"+t.join("&")}function _s(i,t){if(typeof i<"u"){var e=0;for(var a in i){if(t===e)return i[a];e++}return""}else return""}let ms=function(i){var t=i||"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",e=t.length;return{encode:function(a){if(typeof a!="number"||a!==parseInt(a))throw'"encode" only accepts integers.';for(var s="";a;){var o=a%e;a=Math.floor(a/e),s=t[o].toString()+s}return s},decode:function(a){if(typeof a!="string")throw'"decode" only accepts strings.';for(var s=0;a;){var o=t.indexOf(a[0]);if(o<0)throw`"decode" can't find "`+a[0]+'" in the alphabet: "'+t+'"';var l=a.length-1;s+=o*Math.pow(e,l),a=a.substring(1)}return s}}}();function li(i){if(typeof i=="string"){let s=i.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var t=parseInt(s[1])||0,e=parseInt(s[2])||0,a=parseInt(s[3])||0;return a+e*60+t*60*60}}else if(typeof i=="number")return i;return 0}function ps(i){var t=new DOMParser().parseFromString(i,"text/html");return t.body.textContent||""}function gs(i){}function Ye(i){var t=new gs;return t.get(i)}function Le(i){return i==1?1:1-Math.pow(2,-10*i)}function ke(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i}let Ue=function(){};Ue.extend=function(i){var t=function(){this.initialize&&this.initialize.apply(this,arguments)},e=function(){};e.prototype=this.prototype;var a=new e;a.constructor=t,t.prototype=a,t.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(t[s]=this[s]);return i.statics&&(ge(t,i.statics),delete i.statics),i.includes&&(ge.apply(null,[a].concat(i.includes)),delete i.includes),i.options&&a.options&&(i.options=ge({},a.options,i.options)),ge(a,i),t.extend=Ue.extend,t.include=function(o){ge(this.prototype,o)},t};class At{on(t,e,a){if(!e)throw new Q("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[t]=s[t]||[],s[t].push({action:e,context:a||this}),this}addEventListener(t,e,a){return this.on(t,e,a)}hasEventListeners(t){var e="_tl_events";return e in this&&t in this[e]&&this[e][t].length>0}removeEventListener(t,e,a){if(!this.hasEventListeners(t))return this;for(var s=0,o=this._tl_events,l=o[t].length;s<l;s++)if(o[t][s].action===e&&(!a||o[t][s].context===a))return o[t].splice(s,1),this;return this}off(t,e,a){return this.removeEventListener(t,e,a)}fire(t,e){if(!this.hasEventListeners(t))return this;for(var a=st({type:t,target:this},e),s=this._tl_events[t].slice(),o=0,l=s.length;o<l;o++)s[o].action?s[o].action.call(s[o].context||this,a):tt(`no action defined for ${t} listener`);return this}}function Xt(i,t){return vs(i,t)}const vs=function(){var i=document,t=window,e=t.performance,a=e&&(e.now||e.webkitNow||e.msNow||e.mozNow),s=a?function(){return a.call(e)}:function(){return+new Date},o=i.documentElement,l=!1,f=1e3,b=/^rgb\(|#/,v=/^([+\-])=([\d\.]+)/,g=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,_=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,A=/scale\(((?:[+\-]=)?([\d\.]+))\)/,I=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,P=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,B={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},F=function(){var w=i.createElement("a").style,T=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],y;for(y=0;y<T.length;y++)if(T[y]in w)return T[y]}(),J=function(){return typeof i.createElement("a").style.opacity<"u"}(),Z=i.defaultView&&i.defaultView.getComputedStyle?function(w,T){T=T=="transform"?F:T,T=L(T);var y=null,S=i.defaultView.getComputedStyle(w,"");return S&&(y=S[T]),w.style[T]||y}:o.currentStyle?function(w,T){if(T=L(T),T=="opacity"){var y=100;try{y=w.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{y=w.filters("alpha").opacity}catch{}}return y/100}var S=w.currentStyle?w.currentStyle[T]:null;return w.style[T]||S}:function(w,T){return w.style[L(T)]},X=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(w){t.setTimeout(function(){w(+new Date)},17)}}(),j=[];X(function(w){l=w>1e12!=s()>1e12});function ct(w,T,y){if(Array.prototype.indexOf)return w.indexOf(T);for(y=0;y<w.length;++y)if(w[y]===T)return y}function bt(w){var T,y=j.length;for(a&&w>1e12&&(w=s()),l&&(w=s()),T=y;T--;)j[T](w);j.length&&X(bt)}function ut(w){j.push(w)===1&&X(bt)}function Ht(w){var T,y=ct(j,w);y>=0&&(T=j.slice(y+1),j.length=y,j=j.concat(T))}function p(w,T){var y={},S;return(S=w.match(_))&&(y.rotate=at(S[1],T?T.rotate:null)),(S=w.match(A))&&(y.scale=at(S[1],T?T.scale:null)),(S=w.match(I))&&(y.skewx=at(S[1],T?T.skewx:null),y.skewy=at(S[3],T?T.skewy:null)),(S=w.match(P))&&(y.translatex=at(S[1],T?T.translatex:null),y.translatey=at(S[3],T?T.translatey:null)),y}function u(w){var T="";return"rotate"in w&&(T+="rotate("+w.rotate+"deg) "),"scale"in w&&(T+="scale("+w.scale+") "),"translatex"in w&&(T+="translate("+w.translatex+"px,"+w.translatey+"px) "),"skewx"in w&&(T+="skew("+w.skewx+"deg,"+w.skewy+"deg)"),T}function c(w,T,y){return"#"+(1<<24|w<<16|T<<8|y).toString(16).slice(1)}function M(w){var T=w.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(T?c(T[1],T[2],T[3]):w).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function L(w){return w.replace(/-(.)/g,function(T,y){return y.toUpperCase()})}function N(w){return typeof w=="function"}function q(w){return Math.sin(w*Math.PI/2)}function U(w,T,y,S,R,W){S=N(S)?S:$.easings[S]||q;var ht=w||f,lt=this,Mt=W-R,_t=s(),Nt=0,dt=0;function mt(Tt){var r=Tt-_t;if(r>ht||Nt)return W=isFinite(W)?W:1,Nt?dt&&T(W):T(W),Ht(mt),y&&y.apply(lt);isFinite(W)?T(Mt*S(r/ht)+R):T(S(r/ht))}return ut(mt),{stop:function(Tt){Nt=1,dt=Tt,Tt||(y=null)}}}function et(w,T){var y=w.length,S=[],R,W;for(R=0;R<y;++R)S[R]=[w[R][0],w[R][1]];for(W=1;W<y;++W)for(R=0;R<y-W;++R)S[R][0]=(1-T)*S[R][0]+T*S[parseInt(R+1,10)][0],S[R][1]=(1-T)*S[R][1]+T*S[parseInt(R+1,10)][1];return[S[0][0],S[0][1]]}function K(w,T,y){var S=[],R,W,ht,lt;for(R=0;R<6;R++)ht=Math.min(15,parseInt(T.charAt(R),16)),lt=Math.min(15,parseInt(y.charAt(R),16)),W=Math.floor((lt-ht)*w+ht),W=W>15?15:W<0?0:W,S[R]=W.toString(16);return"#"+S.join("")}function O(w,T,y,S,R,W,ht){if(R=="transform"){ht={};for(var lt in y[W][R])ht[lt]=lt in S[W][R]?Math.round(((S[W][R][lt]-y[W][R][lt])*w+y[W][R][lt])*f)/f:y[W][R][lt];return ht}else return typeof y[W][R]=="string"?K(w,y[W][R],S[W][R]):(ht=Math.round(((S[W][R]-y[W][R])*w+y[W][R])*f)/f,R in B||(ht+=T[W][R]||"px"),ht)}function at(w,T,y,S,R){return(y=v.exec(w))?(R=parseFloat(y[2]))&&T+(y[1]=="+"?1:-1)*R:parseFloat(w)}function $(w,T){var y=w?y=isFinite(w.length)?w:[w]:[],S,R=T.complete,W=T.duration,ht=T.easing,lt=T.bezier,Mt=[],_t=[],Nt=[],dt=[],mt,Tt;for(lt&&(mt=T.left,Tt=T.top,delete T.right,delete T.bottom,delete T.left,delete T.top),S=y.length;S--;){if(Mt[S]={},_t[S]={},Nt[S]={},lt){var r=Z(y[S],"left"),h=Z(y[S],"top"),m=[at(N(mt)?mt(y[S]):mt||0,parseFloat(r)),at(N(Tt)?Tt(y[S]):Tt||0,parseFloat(h))];dt[S]=N(lt)?lt(y[S],m):lt,dt[S].push(m),dt[S].unshift([parseInt(r,10),parseInt(h,10)])}for(var x in T){switch(x){case"complete":case"duration":case"easing":case"bezier":continue}var z=Z(y[S],x),G,rt=N(T[x])?T[x](y[S]):T[x];if(typeof rt=="string"&&b.test(rt)&&!b.test(z)){delete T[x];continue}Mt[S][x]=x=="transform"?p(z):typeof rt=="string"&&b.test(rt)?M(z).slice(1):parseFloat(z),_t[S][x]=x=="transform"?p(rt,Mt[S][x]):typeof rt=="string"&&rt.charAt(0)=="#"?M(rt).slice(1):at(rt,parseFloat(z)),typeof rt=="string"&&(G=rt.match(g))&&(Nt[S][x]=G[1])}}return U.apply(y,[W,function(ft,pt,Et){for(S=y.length;S--;){lt&&(Et=et(dt[S],ft),y[S].style.left=Et[0]+"px",y[S].style.top=Et[1]+"px");for(var gt in T)pt=O(ft,Nt,Mt,_t,gt,S),gt=="transform"?y[S].style[F]=u(pt):gt=="opacity"&&!J?y[S].style.filter="alpha(opacity="+pt*100+")":y[S].style[L(gt)]=pt}},R,ht])}return $.tween=U,$.getStyle=Z,$.bezier=et,$.transform=F,$.parseTransform=p,$.formatTransform=u,$.easings={},$}();class Jt{show(t){t||(this._el.container.style.display="block")}hide(t){this._el.container.style.display="none"}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}animatePosition(t,e){var a={duration:this.options.duration,easing:this.options.ease};for(var s in t)t.hasOwnProperty(s)&&(a[s]=t[s]+"px");this.animator&&this.animator.stop(),this.animator=Xt(e,a)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(t,e){for(var a in t)t.hasOwnProperty(a)&&(e?e.style[a]=t[a]+"px":this._el.container.style[a]=t[a]+"px")}getPosition(){return yi(this._el.container)}}class ys{constructor(t,e,a){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},a&&(this._el.move=a),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:ke},this.animator=null,this.dragevent=this.mousedrag,Ut&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},st(this.options,e)}enable(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Y.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Y.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){Ut?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=yi(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Y.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Y.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,Y.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Y.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){t.preventDefault(),this.data.sliding=!0,Ut?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=yi(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},a=!1;t.time=(new Date().getTime()-this.data.time.start)*10,e.time=(new Date().getTime()-this.data.time.start)*10,e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<3e3&&(a=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right")),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down")),this._animateMomentum(),a&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:Le};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),e.left=Math.floor(t.x)+"px"),this.animator=Xt(this._el.move,e),this.fire("momentum",this.data)}}Dt(At);var Y={addListener:function(i,t,e,a){var s=Yi(e),o="_tl_"+t+s;if(!i[o]){var l=function(v){return e.call(a||i,v||Y._getEvent())};if(Ut&&t==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(i,l,s);else if("addEventListener"in i)if(t==="mousewheel")i.addEventListener("DOMMouseScroll",l,!1),i.addEventListener(t,l,!1);else if(t==="mouseenter"||t==="mouseleave"){var f=l,b=t==="mouseenter"?"mouseover":"mouseout";l=function(v){if(Y._checkMouse(i,v))return f(v)},i.addEventListener(b,l,!1)}else i.addEventListener(t,l,!1);else"attachEvent"in i&&i.attachEvent("on"+t,l);i[o]=l}},removeListener:function(i,t,e){var a=Yi(e),s="_tl_"+t+a,o=i[s];o&&(Ut&&t==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(i,a):"removeEventListener"in i?t==="mousewheel"?(i.removeEventListener("DOMMouseScroll",o,!1),i.removeEventListener(t,o,!1)):t==="mouseenter"||t==="mouseleave"?i.removeEventListener(t==="mouseenter"?"mouseover":"mouseout",o,!1):i.removeEventListener(t,o,!1):"detachEvent"in i&&i.detachEvent("on"+t,o),i[s]=null)},_checkMouse:function(i,t){var e=t.relatedTarget;if(!e)return!0;try{for(;e&&e!==i;)e=e.parentNode}catch{return!1}return e!==i},_getEvent:function(){var i=window.event;if(!i)for(var t=arguments.callee.caller;t&&(i=t.arguments[0],!(i&&window.Event===i.constructor));)t=t.caller;return i},stopPropagation:function(i){i.stopPropagation?i.stopPropagation():i.cancelBubble=!0},disableClickPropagation:function(i){Y.addListener(i,ys.START,Y.stopPropagation),Y.addListener(i,"click",Y.stopPropagation),Y.addListener(i,"dblclick",Y.stopPropagation)},preventDefault:function(i){i.preventDefault?i.preventDefault():i.returnValue=!1},stop:function(i){Y.preventDefault(i),Y.stopPropagation(i)},getWheelDelta:function(i){var t=0;return i.wheelDelta&&(t=i.wheelDelta/120),i.detail&&(t=-i.detail/3),t}},Kt=function(){var i,t,e,a,s=[],o=s.slice,l=s.filter,f=window.document,b={},v={},g={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},_=/^\s*<(\w+|!)[^>]*>/,A=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,I=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,P=/^(?:body|html)$/i,B=/([A-Z])/g,F=["val","css","html","text","data","width","height","offset"],J=["after","prepend","before","append"],Z=f.createElement("table"),X=f.createElement("tr"),j={tr:f.createElement("tbody"),tbody:Z,thead:Z,tfoot:Z,td:X,th:X,"*":f.createElement("div")},ct=/complete|loaded|interactive/,bt=/^[\w-]*$/,ut={},Ht=ut.toString,p={},u,c,M=f.createElement("div"),L={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},N=Array.isArray||function(r){return r instanceof Array};p.matches=function(r,h){if(!h||!r||r.nodeType!==1)return!1;var m=r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.matchesSelector;if(m)return m.call(r,h);var x,z=r.parentNode,G=!z;return G&&(z=M).appendChild(r),x=~p.qsa(z,h).indexOf(r),G&&M.removeChild(r),x};function q(r){return r==null?String(r):ut[Ht.call(r)]||"object"}function U(r){return q(r)=="function"}function et(r){return r!=null&&r==r.window}function K(r){return r!=null&&r.nodeType==r.DOCUMENT_NODE}function O(r){return q(r)=="object"}function at(r){return O(r)&&!et(r)&&Object.getPrototypeOf(r)==Object.prototype}function $(r){return typeof r.length=="number"}function w(r){return l.call(r,function(h){return h!=null})}function T(r){return r.length>0?e.fn.concat.apply([],r):r}u=function(r){return r.replace(/-+(.)?/g,function(h,m){return m?m.toUpperCase():""})};function y(r){return r.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}c=function(r){return l.call(r,function(h,m){return r.indexOf(h)==m})};function S(r){return r in v?v[r]:v[r]=new RegExp("(^|\\s)"+r+"(\\s|$)")}function R(r,h){return typeof h=="number"&&!g[y(r)]?h+"px":h}function W(r){var h,m;return b[r]||(h=f.createElement(r),f.body.appendChild(h),m=getComputedStyle(h,"").getPropertyValue("display"),h.parentNode.removeChild(h),m=="none"&&(m="block"),b[r]=m),b[r]}function ht(r){return"children"in r?o.call(r.children):e.map(r.childNodes,function(h){if(h.nodeType==1)return h})}p.fragment=function(r,h,m){var x,z,G;return A.test(r)&&(x=e(f.createElement(RegExp.$1))),x||(r.replace&&(r=r.replace(I,"<$1></$2>")),h===i&&(h=_.test(r)&&RegExp.$1),h in j||(h="*"),G=j[h],G.innerHTML=""+r,x=e.each(o.call(G.childNodes),function(){G.removeChild(this)})),at(m)&&(z=e(x),e.each(m,function(rt,ft){F.indexOf(rt)>-1?z[rt](ft):z.attr(rt,ft)})),x},p.Z=function(r,h){return r=r||[],r.__proto__=e.fn,r.selector=h||"",r},p.isZ=function(r){return r instanceof p.Z},p.init=function(r,h){var m;if(r)if(typeof r=="string")if(r=r.trim(),r[0]=="<"&&_.test(r))m=p.fragment(r,RegExp.$1,h),r=null;else{if(h!==i)return e(h).find(r);m=p.qsa(f,r)}else{if(U(r))return e(f).ready(r);if(p.isZ(r))return r;if(N(r))m=w(r);else if(O(r))m=[r],r=null;else if(_.test(r))m=p.fragment(r.trim(),RegExp.$1,h),r=null;else{if(h!==i)return e(h).find(r);m=p.qsa(f,r)}}else return p.Z();return p.Z(m,r)},e=function(r,h){return p.init(r,h)};function lt(r,h,m){for(t in h)m&&(at(h[t])||N(h[t]))?(at(h[t])&&!at(r[t])&&(r[t]={}),N(h[t])&&!N(r[t])&&(r[t]=[]),lt(r[t],h[t],m)):h[t]!==i&&(r[t]=h[t])}e.extend=function(r){var h,m=o.call(arguments,1);return typeof r=="boolean"&&(h=r,r=m.shift()),m.forEach(function(x){lt(r,x,h)}),r},p.qsa=function(r,h){var m,x=h[0]=="#",z=!x&&h[0]==".",G=x||z?h.slice(1):h,rt=bt.test(G);return K(r)&&rt&&x?(m=r.getElementById(G))?[m]:[]:r.nodeType!==1&&r.nodeType!==9?[]:o.call(rt&&!x?z?r.getElementsByClassName(G):r.getElementsByTagName(h):r.querySelectorAll(h))};function Mt(r,h){return h==null?e(r):e(r).filter(h)}e.contains=function(r,h){return r!==h&&r.contains(h)};function _t(r,h,m,x){return U(h)?h.call(r,m,x):h}function Nt(r,h,m){m==null?r.removeAttribute(h):r.setAttribute(h,m)}function dt(r,h){var m=r.className,x=m&&m.baseVal!==i;if(h===i)return x?m.baseVal:m;x?m.baseVal=h:r.className=h}function mt(r){var h;try{return r&&(r=="true"||(r=="false"?!1:r=="null"?null:!/^0/.test(r)&&!isNaN(h=Number(r))?h:/^[\[\{]/.test(r)?e.parseJSON(r):r))}catch{return r}}e.type=q,e.isFunction=U,e.isWindow=et,e.isArray=N,e.isPlainObject=at,e.isEmptyObject=function(r){var h;for(h in r)return!1;return!0},e.inArray=function(r,h,m){return s.indexOf.call(h,r,m)},e.camelCase=u,e.trim=function(r){return r==null?"":String.prototype.trim.call(r)},e.uuid=0,e.support={},e.expr={},e.map=function(r,h){var m,x=[],z,G;if($(r))for(z=0;z<r.length;z++)m=h(r[z],z),m!=null&&x.push(m);else for(G in r)m=h(r[G],G),m!=null&&x.push(m);return T(x)},e.each=function(r,h){var m,x;if($(r)){for(m=0;m<r.length;m++)if(h.call(r[m],m,r[m])===!1)return r}else for(x in r)if(h.call(r[x],x,r[x])===!1)return r;return r},e.grep=function(r,h){return l.call(r,h)},window.JSON&&(e.parseJSON=JSON.parse),e.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(r,h){ut["[object "+h+"]"]=h.toLowerCase()}),e.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(r){return e(e.map(this,function(h,m){return r.call(h,m,h)}))},slice:function(){return e(o.apply(this,arguments))},ready:function(r){return ct.test(f.readyState)&&f.body?r(e):f.addEventListener("DOMContentLoaded",function(){r(e)},!1),this},get:function(r){return r===i?o.call(this):this[r>=0?r:r+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(r){return s.every.call(this,function(h,m){return r.call(h,m,h)!==!1}),this},filter:function(r){return U(r)?this.not(this.not(r)):e(l.call(this,function(h){return p.matches(h,r)}))},add:function(r,h){return e(c(this.concat(e(r,h))))},is:function(r){return this.length>0&&p.matches(this[0],r)},not:function(r){var h=[];if(U(r)&&r.call!==i)this.each(function(x){r.call(this,x)||h.push(this)});else{var m=typeof r=="string"?this.filter(r):$(r)&&U(r.item)?o.call(r):e(r);this.forEach(function(x){m.indexOf(x)<0&&h.push(x)})}return e(h)},has:function(r){return this.filter(function(){return O(r)?e.contains(this,r):e(this).find(r).size()})},eq:function(r){return r===-1?this.slice(r):this.slice(r,+r+1)},first:function(){var r=this[0];return r&&!O(r)?r:e(r)},last:function(){var r=this[this.length-1];return r&&!O(r)?r:e(r)},find:function(r){var h,m=this;return typeof r=="object"?h=e(r).filter(function(){var x=this;return s.some.call(m,function(z){return e.contains(z,x)})}):this.length==1?h=e(p.qsa(this[0],r)):h=this.map(function(){return p.qsa(this,r)}),h},closest:function(r,h){var m=this[0],x=!1;for(typeof r=="object"&&(x=e(r));m&&!(x?x.indexOf(m)>=0:p.matches(m,r));)m=m!==h&&!K(m)&&m.parentNode;return e(m)},parents:function(r){for(var h=[],m=this;m.length>0;)m=e.map(m,function(x){if((x=x.parentNode)&&!K(x)&&h.indexOf(x)<0)return h.push(x),x});return Mt(h,r)},parent:function(r){return Mt(c(this.pluck("parentNode")),r)},children:function(r){return Mt(this.map(function(){return ht(this)}),r)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(r){return Mt(this.map(function(h,m){return l.call(ht(m.parentNode),function(x){return x!==m})}),r)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(r){return e.map(this,function(h){return h[r]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=W(this.nodeName))})},replaceWith:function(r){return this.before(r).remove()},wrap:function(r){var h=U(r);if(this[0]&&!h)var m=e(r).get(0),x=m.parentNode||this.length>1;return this.each(function(z){e(this).wrapAll(h?r.call(this,z):x?m.cloneNode(!0):m)})},wrapAll:function(r){if(this[0]){e(this[0]).before(r=e(r));for(var h;(h=r.children()).length;)r=h.first();e(r).append(this)}return this},wrapInner:function(r){var h=U(r);return this.each(function(m){var x=e(this),z=x.contents(),G=h?r.call(this,m):r;z.length?z.wrapAll(G):x.append(G)})},unwrap:function(){return this.parent().each(function(){e(this).replaceWith(e(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(r){return this.each(function(){var h=e(this);(r===i?h.css("display")=="none":r)?h.show():h.hide()})},prev:function(r){return e(this.pluck("previousElementSibling")).filter(r||"*")},next:function(r){return e(this.pluck("nextElementSibling")).filter(r||"*")},html:function(r){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(h){var m=this.innerHTML;e(this).empty().append(_t(this,r,h,m))})},text:function(r){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=r===i?"":""+r})},attr:function(r,h){var m;return typeof r=="string"&&h===i?this.length==0||this[0].nodeType!==1?i:r=="value"&&this[0].nodeName=="INPUT"?this.val():!(m=this[0].getAttribute(r))&&r in this[0]?this[0][r]:m:this.each(function(x){if(this.nodeType===1)if(O(r))for(t in r)Nt(this,t,r[t]);else Nt(this,r,_t(this,h,x,this.getAttribute(r)))})},removeAttr:function(r){return this.each(function(){this.nodeType===1&&Nt(this,r)})},prop:function(r,h){return r=L[r]||r,h===i?this[0]&&this[0][r]:this.each(function(m){this[r]=_t(this,h,m,this[r])})},data:function(r,h){var m=this.attr("data-"+r.replace(B,"-$1").toLowerCase(),h);return m!==null?mt(m):i},val:function(r){return arguments.length===0?this[0]&&(this[0].multiple?e(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(h){this.value=_t(this,r,h,this.value)})},offset:function(r){if(r)return this.each(function(m){var x=e(this),z=_t(this,r,m,x.offset()),G=x.offsetParent().offset(),rt={top:z.top-G.top,left:z.left-G.left};x.css("position")=="static"&&(rt.position="relative"),x.css(rt)});if(this.length==0)return null;var h=this[0].getBoundingClientRect();return{left:h.left+window.pageXOffset,top:h.top+window.pageYOffset,width:Math.round(h.width),height:Math.round(h.height)}},css:function(r,h){if(arguments.length<2){var m=this[0],x=getComputedStyle(m,"");if(!m)return;if(typeof r=="string")return m.style[u(r)]||x.getPropertyValue(r);if(N(r)){var z={};return e.each(N(r)?r:[r],function(rt,ft){z[ft]=m.style[u(ft)]||x.getPropertyValue(ft)}),z}}var G="";if(q(r)=="string")!h&&h!==0?this.each(function(){this.style.removeProperty(y(r))}):G=y(r)+":"+R(r,h);else for(t in r)!r[t]&&r[t]!==0?this.each(function(){this.style.removeProperty(y(t))}):G+=y(t)+":"+R(t,r[t])+";";return this.each(function(){this.style.cssText+=";"+G})},index:function(r){return r?this.indexOf(e(r)[0]):this.parent().children().indexOf(this[0])},hasClass:function(r){return r?s.some.call(this,function(h){return this.test(dt(h))},S(r)):!1},addClass:function(r){return r?this.each(function(h){a=[];var m=dt(this),x=_t(this,r,h,m);x.split(/\s+/g).forEach(function(z){e(this).hasClass(z)||a.push(z)},this),a.length&&dt(this,m+(m?" ":"")+a.join(" "))}):this},removeClass:function(r){return this.each(function(h){if(r===i)return dt(this,"");a=dt(this),_t(this,r,h,a).split(/\s+/g).forEach(function(m){a=a.replace(S(m)," ")}),dt(this,a.trim())})},toggleClass:function(r,h){return r?this.each(function(m){var x=e(this),z=_t(this,r,m,dt(this));z.split(/\s+/g).forEach(function(G){(h===i?!x.hasClass(G):h)?x.addClass(G):x.removeClass(G)})}):this},scrollTop:function(r){if(this.length){var h="scrollTop"in this[0];return r===i?h?this[0].scrollTop:this[0].pageYOffset:this.each(h?function(){this.scrollTop=r}:function(){this.scrollTo(this.scrollX,r)})}},scrollLeft:function(r){if(this.length){var h="scrollLeft"in this[0];return r===i?h?this[0].scrollLeft:this[0].pageXOffset:this.each(h?function(){this.scrollLeft=r}:function(){this.scrollTo(r,this.scrollY)})}},position:function(){if(this.length){var r=this[0],h=this.offsetParent(),m=this.offset(),x=P.test(h[0].nodeName)?{top:0,left:0}:h.offset();return m.top-=parseFloat(e(r).css("margin-top"))||0,m.left-=parseFloat(e(r).css("margin-left"))||0,x.top+=parseFloat(e(h[0]).css("border-top-width"))||0,x.left+=parseFloat(e(h[0]).css("border-left-width"))||0,{top:m.top-x.top,left:m.left-x.left}}},offsetParent:function(){return this.map(function(){for(var r=this.offsetParent||f.body;r&&!P.test(r.nodeName)&&e(r).css("position")=="static";)r=r.offsetParent;return r})}},e.fn.detach=e.fn.remove,["width","height"].forEach(function(r){var h=r.replace(/./,function(m){return m[0].toUpperCase()});e.fn[r]=function(m){var x,z=this[0];return m===i?et(z)?z["inner"+h]:K(z)?z.documentElement["scroll"+h]:(x=this.offset())&&x[r]:this.each(function(G){z=e(this),z.css(r,_t(this,m,G,z[r]()))})}});function Tt(r,h){h(r);for(var m in r.childNodes)Tt(r.childNodes[m],h)}return J.forEach(function(r,h){var m=h%2;e.fn[r]=function(){var x,z=e.map(arguments,function(ft){return x=q(ft),x=="object"||x=="array"||ft==null?ft:p.fragment(ft)}),G,rt=this.length>1;return z.length<1?this:this.each(function(ft,pt){G=m?pt:pt.parentNode,pt=h==0?pt.nextSibling:h==1?pt.firstChild:h==2?pt:null,z.forEach(function(Et){if(rt)Et=Et.cloneNode(!0);else if(!G)return e(Et).remove();Tt(G.insertBefore(Et,pt),function(gt){gt.nodeName!=null&&gt.nodeName.toUpperCase()==="SCRIPT"&&(!gt.type||gt.type==="text/javascript")&&!gt.src&&window.eval.call(window,gt.innerHTML)})})})},e.fn[m?r+"To":"insert"+(h?"Before":"After")]=function(x){return e(x)[r](this),this}}),p.Z.prototype=e.fn,p.uniq=c,p.deserializeValue=mt,e.zepto=p,e}();window.Zepto=Kt;window.$===void 0&&(window.$=Kt);(function(i){i.zepto.qsa;var t=1,e,a=Array.prototype.slice,s=i.isFunction,o=function(p){return typeof p=="string"},l={},f={},b="onfocusin"in window,v={focus:"focusin",blur:"focusout"},g={mouseenter:"mouseover",mouseleave:"mouseout"};f.click=f.mousedown=f.mouseup=f.mousemove="MouseEvents";function _(p){return p._zid||(p._zid=t++)}function A(p,u,c,M){if(u=I(u),u.ns)var L=P(u.ns);return(l[_(p)]||[]).filter(function(N){return N&&(!u.e||N.e==u.e)&&(!u.ns||L.test(N.ns))&&(!c||_(N.fn)===_(c))&&(!M||N.sel==M)})}function I(p){var u=(""+p).split(".");return{e:u[0],ns:u.slice(1).sort().join(" ")}}function P(p){return new RegExp("(?:^| )"+p.replace(" "," .* ?")+"(?: |$)")}function B(p,u){return p.del&&!b&&p.e in v||!!u}function F(p){return g[p]||b&&v[p]||p}function J(p,u,c,M,L,N,q){var U=_(p),et=l[U]||(l[U]=[]);u.split(/\s/).forEach(function(K){if(K=="ready")return i(document).ready(c);var O=I(K);O.fn=c,O.sel=L,O.e in g&&(c=function($){var w=$.relatedTarget;if(!w||w!==this&&!i.contains(this,w))return O.fn.apply(this,arguments)}),O.del=N;var at=N||c;O.proxy=function($){if($=ut($),!$.isImmediatePropagationStopped()){$.data=M;var w=at.apply(p,$._args==e?[$]:[$].concat($._args));return w===!1&&($.preventDefault(),$.stopPropagation()),w}},O.i=et.length,et.push(O),"addEventListener"in p&&p.addEventListener(F(O.e),O.proxy,B(O,q))})}function Z(p,u,c,M,L){var N=_(p);(u||"").split(/\s/).forEach(function(q){A(p,q,c,M).forEach(function(U){delete l[N][U.i],"removeEventListener"in p&&p.removeEventListener(F(U.e),U.proxy,B(U,L))})})}i.event={add:J,remove:Z},i.proxy=function(p,u){if(s(p)){var c=function(){return p.apply(u,arguments)};return c._zid=_(p),c}else{if(o(u))return i.proxy(p[u],p);throw new TypeError("expected function")}},i.fn.bind=function(p,u,c){return this.on(p,u,c)},i.fn.unbind=function(p,u){return this.off(p,u)},i.fn.one=function(p,u,c,M){return this.on(p,u,c,M,1)};var X=function(){return!0},j=function(){return!1},ct=/^([A-Z]|returnValue$|layer[XY]$)/,bt={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function ut(p,u){return(u||!p.isDefaultPrevented)&&(u||(u=p),i.each(bt,function(c,M){var L=u[c];p[c]=function(){return this[M]=X,L&&L.apply(u,arguments)},p[M]=j}),(u.defaultPrevented!==e?u.defaultPrevented:"returnValue"in u?u.returnValue===!1:u.getPreventDefault&&u.getPreventDefault())&&(p.isDefaultPrevented=X)),p}function Ht(p){var u,c={originalEvent:p};for(u in p)!ct.test(u)&&p[u]!==e&&(c[u]=p[u]);return ut(c,p)}i.fn.delegate=function(p,u,c){return this.on(u,p,c)},i.fn.undelegate=function(p,u,c){return this.off(u,p,c)},i.fn.live=function(p,u){return i(document.body).delegate(this.selector,p,u),this},i.fn.die=function(p,u){return i(document.body).undelegate(this.selector,p,u),this},i.fn.on=function(p,u,c,M,L){var N,q,U=this;return p&&!o(p)?(i.each(p,function(et,K){U.on(et,u,c,K,L)}),U):(!o(u)&&!s(M)&&M!==!1&&(M=c,c=u,u=e),(s(c)||c===!1)&&(M=c,c=e),M===!1&&(M=j),U.each(function(et,K){L&&(N=function(O){return Z(K,O.type,M),M.apply(this,arguments)}),u&&(q=function(O){var at,$=i(O.target).closest(u,K).get(0);if($&&$!==K)return at=i.extend(Ht(O),{currentTarget:$,liveFired:K}),(N||M).apply($,[at].concat(a.call(arguments,1)))}),J(K,p,M,c,u,q||N)}))},i.fn.off=function(p,u,c){var M=this;return p&&!o(p)?(i.each(p,function(L,N){M.off(L,u,N)}),M):(!o(u)&&!s(c)&&c!==!1&&(c=u,u=e),c===!1&&(c=j),M.each(function(){Z(this,p,c,u)}))},i.fn.trigger=function(p,u){return p=o(p)||i.isPlainObject(p)?i.Event(p):ut(p),p._args=u,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(p):i(this).triggerHandler(p,u)})},i.fn.triggerHandler=function(p,u){var c,M;return this.each(function(L,N){c=Ht(o(p)?i.Event(p):p),c._args=u,c.target=N,i.each(A(N,p.type||p),function(q,U){if(M=U.proxy(c),c.isImmediatePropagationStopped())return!1})}),M},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(p){i.fn[p]=function(u){return u?this.bind(p,u):this.trigger(p)}}),["focus","blur"].forEach(function(p){i.fn[p]=function(u){return u?this.bind(p,u):this.each(function(){try{this[p]()}catch{}}),this}}),i.Event=function(p,u){o(p)||(u=p,p=u.type);var c=document.createEvent(f[p]||"Events"),M=!0;if(u)for(var L in u)L=="bubbles"?M=!!u[L]:c[L]=u[L];return c.initEvent(p,M,!0),ut(c)}})(Kt);(function(i){var t=0,e=window.document,a,s,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,l=/^(?:text|application)\/javascript/i,f=/^(?:text|application)\/xml/i,b="application/json",v="text/html",g=/^\s*$/;function _(u,c,M){var L=i.Event(c);return i(u).trigger(L,M),!L.isDefaultPrevented()}function A(u,c,M,L){if(u.global)return _(c||e,M,L)}i.active=0;function I(u){u.global&&i.active++===0&&A(u,null,"ajaxStart")}function P(u){u.global&&!--i.active&&A(u,null,"ajaxStop")}function B(u,c){var M=c.context;if(c.beforeSend.call(M,u,c)===!1||A(c,M,"ajaxBeforeSend",[u,c])===!1)return!1;A(c,M,"ajaxSend",[u,c])}function F(u,c,M,L){var N=M.context,q="success";M.success.call(N,u,q,c),L&&L.resolveWith(N,[u,q,c]),A(M,N,"ajaxSuccess",[c,M,u]),Z(q,c,M)}function J(u,c,M,L,N){var q=L.context;L.error.call(q,M,c,u),N&&N.rejectWith(q,[M,c,u]),A(L,q,"ajaxError",[M,L,u||c]),Z(c,M,L)}function Z(u,c,M){var L=M.context;M.complete.call(L,c,u),A(M,L,"ajaxComplete",[c,M]),P(M)}function X(){}i.ajaxJSONP=function(u,c){if(!("type"in u))return i.ajax(u);var M=u.jsonpCallback,L=(i.isFunction(M)?M():M)||"jsonp"+ ++t,N=e.createElement("script"),q=window[L],U,et=function(at){i(N).triggerHandler("error",at||"abort")},K={abort:et},O;return c&&c.promise(K),i(N).on("load error",function(at,$){clearTimeout(O),i(N).off().remove(),at.type=="error"||!U?J(null,$||"error",K,u,c):F(U[0],K,u,c),window[L]=q,U&&i.isFunction(q)&&q(U[0]),q=U=void 0}),B(K,u)===!1?(et("abort"),K):(window[L]=function(){U=arguments},N.src=u.url.replace(/\?(.+)=\?/,"?$1="+L),e.head.appendChild(N),u.timeout>0&&(O=setTimeout(function(){et("timeout")},u.timeout)),K)},i.ajaxSettings={type:"GET",beforeSend:X,success:X,error:X,complete:X,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:b,xml:"application/xml, text/xml",html:v,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function j(u){return u&&(u=u.split(";",2)[0]),u&&(u==v?"html":u==b?"json":l.test(u)?"script":f.test(u)&&"xml")||"text"}function ct(u,c){return c==""?u:(u+"&"+c).replace(/[&?]{1,2}/,"?")}function bt(u){u.processData&&u.data&&i.type(u.data)!="string"&&(u.data=i.param(u.data,u.traditional)),u.data&&(!u.type||u.type.toUpperCase()=="GET")&&(u.url=ct(u.url,u.data),u.data=void 0)}i.ajax=function(u){var c=i.extend({},u||{}),M=i.Deferred&&i.Deferred();for(a in i.ajaxSettings)c[a]===void 0&&(c[a]=i.ajaxSettings[a]);I(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),bt(c),c.cache===!1&&(c.url=ct(c.url,"_="+Date.now()));var L=c.dataType,N=/\?.+=\?/.test(c.url);if(L=="jsonp"||N)return N||(c.url=ct(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),i.ajaxJSONP(c,M);var q=c.accepts[L],U={},et=function(T,y){U[T.toLowerCase()]=[T,y]},K=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,O=c.xhr(),at=O.setRequestHeader,$;if(M&&M.promise(O),c.crossDomain||et("X-Requested-With","XMLHttpRequest"),et("Accept",q||"*/*"),(q=c.mimeType||q)&&(q.indexOf(",")>-1&&(q=q.split(",",2)[0]),O.overrideMimeType&&O.overrideMimeType(q)),(c.contentType||c.contentType!==!1&&c.data&&c.type.toUpperCase()!="GET")&&et("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(s in c.headers)et(s,c.headers[s]);if(O.setRequestHeader=et,O.onreadystatechange=function(){if(O.readyState==4){O.onreadystatechange=X,clearTimeout($);var T,y=!1;if(O.status>=200&&O.status<300||O.status==304||O.status==0&&K=="file:"){L=L||j(c.mimeType||O.getResponseHeader("content-type")),T=O.responseText;try{L=="script"?(0,eval)(T):L=="xml"?T=O.responseXML:L=="json"&&(T=g.test(T)?null:i.parseJSON(T))}catch(S){y=S}y?J(y,"parsererror",O,c,M):F(T,O,c,M)}else J(O.statusText||null,O.status?"error":"abort",O,c,M)}},B(O,c)===!1)return O.abort(),J(null,"abort",O,c,M),O;if(c.xhrFields)for(s in c.xhrFields)O[s]=c.xhrFields[s];var w="async"in c?c.async:!0;O.open(c.type,c.url,w,c.username,c.password);for(s in U)at.apply(O,U[s]);return c.timeout>0&&($=setTimeout(function(){O.onreadystatechange=X,O.abort(),J(null,"timeout",O,c,M)},c.timeout)),O.send(c.data?c.data:null),O};function ut(u,c,M,L){var N=!i.isFunction(c);return{url:u,data:N?c:void 0,success:N?i.isFunction(M)?M:void 0:c,dataType:N&&L||M}}i.get=function(u,c,M,L){return i.ajax(ut.apply(null,arguments))},i.post=function(u,c,M,L){var N=ut.apply(null,arguments);return N.type="POST",i.ajax(N)},i.getJSON=function(u,c,M){var L=ut.apply(null,arguments);return L.dataType="json",i.ajax(L)},i.fetchJSON=function(u){var c=new XMLHttpRequest;return new Promise(function(M,L){c.onreadystatechange=function(){try{if(c.readyState!==4)return;if(c.status>=200&&c.status<300){var N=JSON.parse(c.responseText);M(N)}else L({status:c.status,statusText:c.statusText})}catch(q){L({status:400,statusText:`Error fetching JSON from ${u}: ${q}`})}},c.open("GET",u,!0),c.send()})},i.fn.load=function(u,c,M){if(!this.length)return this;var L=this,N=u.split(/\s/),q,U=ut(u,c,M),et=U.success;return N.length>1&&(U.url=N[0],q=N[1]),U.success=function(K){L.html(q?i("<div>").html(K.replace(o,"")).find(q):K),et&&et.apply(L,arguments)},i.ajax(U),this};var Ht=encodeURIComponent;function p(u,c,M,L){var N,q=i.isArray(c),U=i.isPlainObject(c);i.each(c,function(et,K){N=i.type(K),L&&(et=M?L:L+"["+(U||N=="object"||N=="array"?et:"")+"]"),!L&&q?u.add(K.name,K.value):N=="array"||!M&&N=="object"?p(u,K,M,et):u.add(et,K)})}i.param=function(u,c){var M=[];return M.add=function(L,N){this.push(Ht(L)+"="+Ht(N))},p(M,u,c),M.join("&").replace(/%20/g,"+")}})(Kt);(function(i){i.fn.serializeArray=function(){var t=[],e;return i([].slice.call(this.get(0).elements)).each(function(){e=i(this);var a=e.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&a!="submit"&&a!="reset"&&a!="button"&&(a!="radio"&&a!="checkbox"||this.checked)&&t.push({name:e.attr("name"),value:e.val()})}),t},i.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},i.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var e=i.Event("submit");this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()}return this}})(Kt);(function(i){"__proto__"in{}||i.extend(i.zepto,{Z:function(e,a){return e=e||[],i.extend(e,i.fn),e.selector=a||"",e.__Z=!0,e},isZ:function(e){return i.type(e)==="array"&&"__Z"in e}});try{getComputedStyle(void 0)}catch{var t=getComputedStyle;window.getComputedStyle=function(a,s){try{return t(a,s)}catch{return null}}}})(Kt);const Be=Kt.getJSON,Te=Kt.ajax,Ze=Kt.fetchJSON,qt=[["millisecond",1,function(i){}],["second",1e3,function(i){i.setMilliseconds(0)}],["minute",1e3*60,function(i){i.setSeconds(0)}],["hour",1e3*60*60,function(i){i.setMinutes(0)}],["day",1e3*60*60*24,function(i){i.setHours(0)}],["month",1e3*60*60*24*30,function(i){i.setDate(1)}],["year",1e3*60*60*24*365,function(i){i.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(i){var t=i.getFullYear();i.setFullYear(t-t%10)}],["century",1e3*60*60*24*365*100,function(i){var t=i.getFullYear();i.setFullYear(t-t%100)}],["millennium",1e3*60*60*24*365*1e3,function(i){var t=i.getFullYear();i.setFullYear(t-t%1e3)}]],oe=["millisecond","second","minute","hour","day","month","year"],Zi=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,bs=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Xi={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},Xe=Ue.extend({initialize:function(i,t,e){typeof i=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(i)}:Date==i.constructor?this.data={format:"yyyy mmmm",date_obj:i}:(this.data=JSON.parse(JSON.stringify(i)),this._createDateObj()),i.format&&!t&&(t=i.format),this._setFormat(t,e)},setDateFormat:function(i){this.data.format=i},getDisplayDate:function(i,t){if(this.data.display_date)return this.data.display_date;i||(i=Ot.fallback),i.constructor!=Ot&&(tt("First argument to getDisplayDate must be type Language"),i=Ot.fallback);var e=t||this.data.format;return i.formatDate(this.data.date_obj,e)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(i){if(!this.data.date_obj.constructor==i.data.date_obj.constructor)throw new Q("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(i.data.date_obj):this.data.date_obj<i.data.date_obj},isAfter:function(i){if(!this.data.date_obj.constructor==i.data.date_obj.constructor)throw new Q("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(i.data.date_obj):this.data.date_obj>i.data.date_obj},floor:function(i){for(var t=new Date(this.data.date_obj.getTime()),e=0;e<qt.length;e++)if(qt[e][2](t),qt[e][0]==i)return new Xe(t);throw new Q("invalid_scale_err",i)},_getDateData:function(){var i={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};st(i,this.data);for(var t in oe){var e=Rt(i[oe[t]]);if(!e.match(/^-?\d*$/))throw new Q("invalid_date_err",oe[t]+" = '"+i[oe[t]]+"'");var a=parseInt(i[oe[t]]);isNaN(a)&&(a=t==4||t==5?1:0),i[oe[t]]=a}return i.month>0&&i.month<=12&&(i.month=i.month-1),i},_createDateObj:function(){var i=this._getDateData();this.data.date_obj=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond),this.data.date_obj.getFullYear()!=i.year&&this.data.date_obj.setFullYear(i.year)},findBestFormat:function(i){for(var t=oe,e=0;e<t.length;e++)if(this.data[t[e]])return i?i in Xi||(i="short"):i="base",Xi[i][t[e]];return""},_setFormat:function(i,t){i?this.data.format=i:this.data.format||(this.data.format=this.findBestFormat()),t?this.data.format_short=t:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function Ji(i){if(i.match(Zi)){var t=i.match(Zi).slice(1),e={year:t[0].replace("+","")};return t[1]&&(e.month=t[1].replace("-","")),t[2]&&(e.day=t[2].replace("-","")),e}if(i.match(bs))return cls.parseISODate(i);if(i.match(/^\-?\d+$/))return{year:i};var a={};if(i.match(/\d+\/\d+\/\d+/)){var s=i.match(/\d+\/\d+\/\d+/)[0];i=Rt(i.replace(s,""));var o=s.split("/");a.month=o[0],a.day=o[1],a.year=o[2]}if(i.match(/\d+\/\d+/)){var s=i.match(/\d+\/\d+/)[0];i=Rt(i.replace(s,""));var o=s.split("/");a.month=o[0],a.year=o[1]}if(i.match(":")){var l=i.split(":");if(a.hour=l[0],a.minute=l[1],l[2]){let f=l[2].split(".");a.second=f[0],a.millisecond=f[1]}}return a}const Se=Ue.extend({initialize:function(i){if(this.year=parseInt(i),isNaN(this.year))throw new Q("invalid_year_err",i)},isBefore:function(i){return this.year<i.year},isAfter:function(i){return this.year>i.year},getTime:function(){return this.year}}),wi=1e6,ki=wi*10,Ti=ki*10,Ki=Ti*10;function te(i){return function(t){var e=t.getTime();return new Se(Math.floor(e/i)*i)}}const ze=[["year",1,new te(1)],["decade",10,new te(10)],["century",100,new te(100)],["millennium",1e3,new te(1e3)],["age",wi,new te(wi)],["epoch",ki,new te(ki)],["era",Ti,new te(Ti)],["eon",Ki,new te(Ki)]],Je=Xe.extend({initialize:function(i,t,e){Se==i.constructor?this.data={date_obj:i}:(this.data=JSON.parse(JSON.stringify(i)),this._createDateObj()),i.format&&!t&&(t=i.format),this._setFormat(t,e)},_createDateObj:function(){var i=this._getDateData();this.data.date_obj=new Se(i.year)},floor:function(i){for(var t=0;t<ze.length;t++)if(ze[t][0]==i){var e=ze[t][2](this.data.date_obj);return new Je(e)}throw new Q("invalid_scale_err",i)},getFullYear:function(){return this.data.date_obj.getTime()}}),Qi=new RegExp(/\$\{(.+?)\}/g);class Ot{constructor(t,e){for(let o in se.en)this[o]=se.en[o];if(t&&typeof t=="string"&&t!="en"){var a=t;if(!(a in se)){console.log(`Expected language ${a} to be cached. Did you call the constructor directly?`);var s=wa(a,e);Ze(s).then(o=>{se[a]=o}).catch(o=>{console.log(`Error loading language [${s}] ${o.statusText} [${o.status}]`)})}st(this,se[a])}}mergeData(t){for(k in se.en)t[k]&&(typeof this[k]=="object"?st(t[k],this[k]):this[k]=t[k])}formatBigYear(t,e){var a=t.year,s=this.bigdateformats[e]||this.bigdateformats.fallback;if(s){for(var o=0;o<s.length;o++){var l=s[o];if(Math.abs(a/l[0])>1)return ta(Math.abs(a/l[0]),l[1])}return a.toString()}else return tt("Language file dateformats missing cosmological. Falling back."),ta(a,e)}_(t,e){let a=this.messages[t]||Ot.fallback.messages[t]||t;if(a.match(Qi)){if(!e)throw new Q("template_message_without_context");for(let s of a.matchAll(Qi)){if(!(s[1]in e))throw new Q("template_message_without_context");a=a.replace(s[0],e[s[1]])}}return a}formatDate(t,e){return t.constructor==Date?this.formatJSDate(t,e):t.constructor==Se?this.formatBigYear(t,e):t.data&&t.data.date_obj?this.formatDate(t.data.date_obj,e):(tt("Unfamiliar date presented for formatting"),t.toString())}formatJSDate(t,e){var a=this,s=function(j,ct){var bt=a.period_labels[j];if(bt)var j=ct<12?bt[0]:bt[1];return"<span class='tl-timeaxis-timesuffix'>"+j+"</span>"},o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,l=/[^-+\dA-Z]/g;e||(e="full");var f=this.dateformats[e]||Ot.fallback.dateformats[e];f||(f=e);var b="get",v=t[b+"Date"](),g=t[b+"Day"](),_=t[b+"Month"](),A=t[b+"FullYear"](),I=t[b+"Hours"](),P=t[b+"Minutes"](),B=t[b+"Seconds"](),F=t[b+"Milliseconds"](),J=t.getTimezoneOffset(),Z={d:v,dd:Vt(v),ddd:this.date.day_abbr[g],dddd:this.date.day[g],m:_+1,mm:Vt(_+1),mmm:this.date.month_abbr[_],mmmm:this.date.month[_],yy:String(A).slice(2),yyyy:A<0&&this.has_negative_year_modifier()?Math.abs(A):A,h:I%12||12,hh:Vt(I%12||12),H:I,HH:Vt(I),M:P,MM:Vt(P),s:B,ss:Vt(B),l:Vt(F,3),L:Vt(F>99?Math.round(F/10):F),t:s("t",I),tt:s("tt",I),T:s("T",I),TT:s("TT",I),Z:(String(t).match(o)||[""]).pop().replace(l,""),o:(J>0?"-":"+")+Vt(Math.floor(Math.abs(J)/60)*100+Math.abs(J)%60,4),S:["th","st","nd","rd"][v%10>3?0:(v%100-v%10!=10)*v%10]},X=f.replace(Ot.DATE_FORMAT_TOKENS,function(j){return j in Z?Z[j]:j.slice(1,j.length-1)});return this._applyEra(X,A)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(t,e){var a=e<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return a.prefix&&(s+="<span>"+a.prefix+"</span> "),s+=t,a.suffix&&(s+=" <span>"+a.suffix+"</span>"),s}}async function ws(i,t){var e=wa(i,t);try{if(!se[i]){let a=await Ze(e);se[i]=a}return new Ot(i,t)}catch(a){return console.log(`Error loading language [${e}] ${a.statusText}`),null}}function wa(i,t){if(/\.json$/.test(i))var e=i;else{var a="/locale/"+i+".json";/\/$/.test(t)&&(a=a.substr(1));var e=t+a}return e}function ta(i,t){if(t.match(/%(\.(\d+))?f/)){var e=t.match(/%(\.(\d+))?f/),a=e[0];return e[2]&&(i=i.toFixed(e[2])),t.replace(a,i)}return t}Ot.fallback={messages:{}};Ot.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var se={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value—must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let Ai=new Ot;Ot.fallback=Ai;class Qt{setLanguage(t){this.language=t}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;tt(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return Ai}_(t,e){return this.getLanguage()._(t,e)}}class Ke{constructor(t,e,a){a&&this.setLanguage(a),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=t,st(this.options,e),this._el.container=D("div",this.options.message_class),t&&(t.appendChild(this._el.container),this._el.parent=t),this.animator={},this._initLayout(),this._initEvents()}updateMessage(t){t?this._el.message.innerHTML=t:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(t,e){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=D("div","tl-message-container",this._el.container),this._el.loading_icon=D("div",this.options.message_icon_class,this._el.message_container),this._el.message=D("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Y.addListener(this._el.container,"click",this._onMouseClick,this),Y.addListener(this,"removed",this._onRemove,this)}}Dt(Ke,Qt,At,Jt);function Oe(i,e){var e=e||"start_date";i.sort(function(a,s){return a[e].isBefore(s[e])?-1:a[e].isAfter(s[e])?1:0})}function ea(i){var t={hour:null,minute:null,second:null,millisecond:null},e=null,a=i.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);a&&(e=Rt(a[0]),i=Rt(i.substring(0,i.lastIndexOf(e))));var s=[],o=i.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(o?s=o.slice(1):(s=i.split(":"),s.length==1&&(s=i.split("."))),s.length>4)throw new Q("invalid_separator_error");let l=s[0];if(t.hour=parseInt(l),e&&e.toLowerCase()[0]=="p"&&t.hour!=12?t.hour+=12:e&&e.toLowerCase()[0]=="a"&&t.hour==12&&(t.hour=0),isNaN(t.hour)||t.hour<0||t.hour>23)throw new Q("invalid_hour_err",l);if(s.length>1){let v=s[1];if(t.minute=parseInt(v),isNaN(t.minute))throw new Q("invalid_minute_err",v)}if(s.length>2){var f=s[2].split(/[\.,]/);if(s=f.concat(s.slice(3)),s.length>2)throw new Q("invalid_second_fractional_err");if(t.second=parseInt(s[0]),isNaN(t.second))throw new Q("invalid_second_err",s[0]);if(s.length==2){var b=parseInt(s[1]);if(isNaN(b))throw new Q("invalid_fractional_err",s[1]);t.millisecond=100*b}}return t}const ks=new RegExp("(^-?\\d+$|^$)");function ia(i){try{return Object.keys(i).forEach(t=>{let e=i[t];if(e&&e.match&&!e.match(ks))throw`invalid value ${e} for ${t}`}),!0}catch{return!1}}const aa={human:Xe,cosmological:Je};/*! @license DOMPurify 2.4.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.7/LICENSE */function ne(i){"@babel/helpers - typeof";return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(i)}function xi(i,t){return xi=Object.setPrototypeOf||function(a,s){return a.__proto__=s,a},xi(i,t)}function Ts(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function je(i,t,e){return Ts()?je=Reflect.construct:je=function(s,o,l){var f=[null];f.push.apply(f,o);var b=Function.bind.apply(s,f),v=new b;return l&&xi(v,l.prototype),v},je.apply(null,arguments)}function zt(i){return xs(i)||Ms(i)||Es(i)||Ls()}function xs(i){if(Array.isArray(i))return Mi(i)}function Ms(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Es(i,t){if(i){if(typeof i=="string")return Mi(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Mi(i,t)}}function Mi(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=i[e];return a}function Ls(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ss=Object.hasOwnProperty,sa=Object.setPrototypeOf,Ds=Object.isFrozen,As=Object.getPrototypeOf,Ns=Object.getOwnPropertyDescriptor,St=Object.freeze,jt=Object.seal,Is=Object.create,ka=typeof Reflect<"u"&&Reflect,We=ka.apply,Ei=ka.construct;We||(We=function(t,e,a){return t.apply(e,a)});St||(St=function(t){return t});jt||(jt=function(t){return t});Ei||(Ei=function(t,e){return je(t,zt(e))});var Cs=Pt(Array.prototype.forEach),na=Pt(Array.prototype.pop),Me=Pt(Array.prototype.push),qe=Pt(String.prototype.toLowerCase),hi=Pt(String.prototype.toString),Rs=Pt(String.prototype.match),Ft=Pt(String.prototype.replace),Os=Pt(String.prototype.indexOf),Ps=Pt(String.prototype.trim),Lt=Pt(RegExp.prototype.test),di=Hs(TypeError);function Pt(i){return function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),s=1;s<e;s++)a[s-1]=arguments[s];return We(i,t,a)}}function Hs(i){return function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return Ei(i,e)}}function V(i,t,e){var a;e=(a=e)!==null&&a!==void 0?a:qe,sa&&sa(i,null);for(var s=t.length;s--;){var o=t[s];if(typeof o=="string"){var l=e(o);l!==o&&(Ds(t)||(t[s]=l),o=l)}i[o]=!0}return i}function le(i){var t=Is(null),e;for(e in i)We(Ss,i,[e])===!0&&(t[e]=i[e]);return t}function Pe(i,t){for(;i!==null;){var e=Ns(i,t);if(e){if(e.get)return Pt(e.get);if(typeof e.value=="function")return Pt(e.value)}i=As(i)}function a(s){return console.warn("fallback value for",s),null}return a}var ra=St(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ci=St(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ui=St(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Fs=St(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fi=St(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),zs=St(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),oa=St(["#text"]),la=St(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),_i=St(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ha=St(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),He=St(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),js=jt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qs=jt(/<%[\w\W]*|[\w\W]*%>/gm),Us=jt(/\${[\w\W]*}/gm),Bs=jt(/^data-[\-\w.\u00B7-\uFFFF]/),Ws=jt(/^aria-[\-\w]+$/),Gs=jt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$s=jt(/^(?:\w+script|data):/i),Vs=jt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ys=jt(/^html$/i),Zs=function(){return typeof window>"u"?null:window},Xs=function(t,e){if(ne(t)!=="object"||typeof t.createPolicy!="function")return null;var a=null,s="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(s)&&(a=e.currentScript.getAttribute(s));var o="dompurify"+(a?"#"+a:"");try{return t.createPolicy(o,{createHTML:function(f){return f},createScriptURL:function(f){return f}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Ta(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zs(),t=function(d){return Ta(d)};if(t.version="2.4.7",t.removed=[],!i||!i.document||i.document.nodeType!==9)return t.isSupported=!1,t;var e=i.document,a=i.document,s=i.DocumentFragment,o=i.HTMLTemplateElement,l=i.Node,f=i.Element,b=i.NodeFilter,v=i.NamedNodeMap,g=v===void 0?i.NamedNodeMap||i.MozNamedAttrMap:v,_=i.HTMLFormElement,A=i.DOMParser,I=i.trustedTypes,P=f.prototype,B=Pe(P,"cloneNode"),F=Pe(P,"nextSibling"),J=Pe(P,"childNodes"),Z=Pe(P,"parentNode");if(typeof o=="function"){var X=a.createElement("template");X.content&&X.content.ownerDocument&&(a=X.content.ownerDocument)}var j=Xs(I,e),ct=j?j.createHTML(""):"",bt=a,ut=bt.implementation,Ht=bt.createNodeIterator,p=bt.createDocumentFragment,u=bt.getElementsByTagName,c=e.importNode,M={};try{M=le(a).documentMode?a.documentMode:{}}catch{}var L={};t.isSupported=typeof Z=="function"&&ut&&ut.createHTMLDocument!==void 0&&M!==9;var N=js,q=qs,U=Us,et=Bs,K=Ws,O=$s,at=Vs,$=Gs,w=null,T=V({},[].concat(zt(ra),zt(ci),zt(ui),zt(fi),zt(oa))),y=null,S=V({},[].concat(zt(la),zt(_i),zt(ha),zt(He))),R=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,ht=null,lt=!0,Mt=!0,_t=!1,Nt=!0,dt=!1,mt=!1,Tt=!1,r=!1,h=!1,m=!1,x=!1,z=!0,G=!1,rt="user-content-",ft=!0,pt=!1,Et={},gt=null,Ii=V({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ci=null,Ri=V({},["audio","video","img","source","image","track"]),ti=null,Oi=V({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ne="http://www.w3.org/1998/Math/MathML",Ie="http://www.w3.org/2000/svg",Wt="http://www.w3.org/1999/xhtml",_e=Wt,ei=!1,ii=null,Fa=V({},[Ne,Ie,Wt],hi),re,za=["application/xhtml+xml","text/html"],ja="text/html",vt,me=null,qa=a.createElement("form"),Pi=function(d){return d instanceof RegExp||d instanceof Function},ai=function(d){me&&me===d||((!d||ne(d)!=="object")&&(d={}),d=le(d),re=za.indexOf(d.PARSER_MEDIA_TYPE)===-1?re=ja:re=d.PARSER_MEDIA_TYPE,vt=re==="application/xhtml+xml"?hi:qe,w="ALLOWED_TAGS"in d?V({},d.ALLOWED_TAGS,vt):T,y="ALLOWED_ATTR"in d?V({},d.ALLOWED_ATTR,vt):S,ii="ALLOWED_NAMESPACES"in d?V({},d.ALLOWED_NAMESPACES,hi):Fa,ti="ADD_URI_SAFE_ATTR"in d?V(le(Oi),d.ADD_URI_SAFE_ATTR,vt):Oi,Ci="ADD_DATA_URI_TAGS"in d?V(le(Ri),d.ADD_DATA_URI_TAGS,vt):Ri,gt="FORBID_CONTENTS"in d?V({},d.FORBID_CONTENTS,vt):Ii,W="FORBID_TAGS"in d?V({},d.FORBID_TAGS,vt):{},ht="FORBID_ATTR"in d?V({},d.FORBID_ATTR,vt):{},Et="USE_PROFILES"in d?d.USE_PROFILES:!1,lt=d.ALLOW_ARIA_ATTR!==!1,Mt=d.ALLOW_DATA_ATTR!==!1,_t=d.ALLOW_UNKNOWN_PROTOCOLS||!1,Nt=d.ALLOW_SELF_CLOSE_IN_ATTR!==!1,dt=d.SAFE_FOR_TEMPLATES||!1,mt=d.WHOLE_DOCUMENT||!1,h=d.RETURN_DOM||!1,m=d.RETURN_DOM_FRAGMENT||!1,x=d.RETURN_TRUSTED_TYPE||!1,r=d.FORCE_BODY||!1,z=d.SANITIZE_DOM!==!1,G=d.SANITIZE_NAMED_PROPS||!1,ft=d.KEEP_CONTENT!==!1,pt=d.IN_PLACE||!1,$=d.ALLOWED_URI_REGEXP||$,_e=d.NAMESPACE||Wt,R=d.CUSTOM_ELEMENT_HANDLING||{},d.CUSTOM_ELEMENT_HANDLING&&Pi(d.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(R.tagNameCheck=d.CUSTOM_ELEMENT_HANDLING.tagNameCheck),d.CUSTOM_ELEMENT_HANDLING&&Pi(d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(R.attributeNameCheck=d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),d.CUSTOM_ELEMENT_HANDLING&&typeof d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(R.allowCustomizedBuiltInElements=d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),dt&&(Mt=!1),m&&(h=!0),Et&&(w=V({},zt(oa)),y=[],Et.html===!0&&(V(w,ra),V(y,la)),Et.svg===!0&&(V(w,ci),V(y,_i),V(y,He)),Et.svgFilters===!0&&(V(w,ui),V(y,_i),V(y,He)),Et.mathMl===!0&&(V(w,fi),V(y,ha),V(y,He))),d.ADD_TAGS&&(w===T&&(w=le(w)),V(w,d.ADD_TAGS,vt)),d.ADD_ATTR&&(y===S&&(y=le(y)),V(y,d.ADD_ATTR,vt)),d.ADD_URI_SAFE_ATTR&&V(ti,d.ADD_URI_SAFE_ATTR,vt),d.FORBID_CONTENTS&&(gt===Ii&&(gt=le(gt)),V(gt,d.FORBID_CONTENTS,vt)),ft&&(w["#text"]=!0),mt&&V(w,["html","head","body"]),w.table&&(V(w,["tbody"]),delete W.tbody),St&&St(d),me=d)},Hi=V({},["mi","mo","mn","ms","mtext"]),Fi=V({},["foreignobject","desc","title","annotation-xml"]),Ua=V({},["title","style","font","a","script"]),Ce=V({},ci);V(Ce,ui),V(Ce,Fs);var si=V({},fi);V(si,zs);var Ba=function(d){var E=Z(d);(!E||!E.tagName)&&(E={namespaceURI:_e,tagName:"template"});var C=qe(d.tagName),it=qe(E.tagName);return ii[d.namespaceURI]?d.namespaceURI===Ie?E.namespaceURI===Wt?C==="svg":E.namespaceURI===Ne?C==="svg"&&(it==="annotation-xml"||Hi[it]):!!Ce[C]:d.namespaceURI===Ne?E.namespaceURI===Wt?C==="math":E.namespaceURI===Ie?C==="math"&&Fi[it]:!!si[C]:d.namespaceURI===Wt?E.namespaceURI===Ie&&!Fi[it]||E.namespaceURI===Ne&&!Hi[it]?!1:!si[C]&&(Ua[C]||!Ce[C]):!!(re==="application/xhtml+xml"&&ii[d.namespaceURI]):!1},Gt=function(d){Me(t.removed,{element:d});try{d.parentNode.removeChild(d)}catch{try{d.outerHTML=ct}catch{d.remove()}}},ni=function(d,E){try{Me(t.removed,{attribute:E.getAttributeNode(d),from:E})}catch{Me(t.removed,{attribute:null,from:E})}if(E.removeAttribute(d),d==="is"&&!y[d])if(h||m)try{Gt(E)}catch{}else try{E.setAttribute(d,"")}catch{}},zi=function(d){var E,C;if(r)d="<remove></remove>"+d;else{var it=Rs(d,/^[\r\n\t ]+/);C=it&&it[0]}re==="application/xhtml+xml"&&_e===Wt&&(d='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+d+"</body></html>");var It=j?j.createHTML(d):d;if(_e===Wt)try{E=new A().parseFromString(It,re)}catch{}if(!E||!E.documentElement){E=ut.createDocument(_e,"template",null);try{E.documentElement.innerHTML=ei?ct:It}catch{}}var xt=E.body||E.documentElement;return d&&C&&xt.insertBefore(a.createTextNode(C),xt.childNodes[0]||null),_e===Wt?u.call(E,mt?"html":"body")[0]:mt?E.documentElement:xt},ji=function(d){return Ht.call(d.ownerDocument||d,d,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT,null,!1)},Wa=function(d){return d instanceof _&&(typeof d.nodeName!="string"||typeof d.textContent!="string"||typeof d.removeChild!="function"||!(d.attributes instanceof g)||typeof d.removeAttribute!="function"||typeof d.setAttribute!="function"||typeof d.namespaceURI!="string"||typeof d.insertBefore!="function"||typeof d.hasChildNodes!="function")},xe=function(d){return ne(l)==="object"?d instanceof l:d&&ne(d)==="object"&&typeof d.nodeType=="number"&&typeof d.nodeName=="string"},$t=function(d,E,C){L[d]&&Cs(L[d],function(it){it.call(t,E,C,me)})},qi=function(d){var E;if($t("beforeSanitizeElements",d,null),Wa(d)||Lt(/[\u0080-\uFFFF]/,d.nodeName))return Gt(d),!0;var C=vt(d.nodeName);if($t("uponSanitizeElement",d,{tagName:C,allowedTags:w}),d.hasChildNodes()&&!xe(d.firstElementChild)&&(!xe(d.content)||!xe(d.content.firstElementChild))&&Lt(/<[/\w]/g,d.innerHTML)&&Lt(/<[/\w]/g,d.textContent)||C==="select"&&Lt(/<template/i,d.innerHTML))return Gt(d),!0;if(!w[C]||W[C]){if(!W[C]&&Bi(C)&&(R.tagNameCheck instanceof RegExp&&Lt(R.tagNameCheck,C)||R.tagNameCheck instanceof Function&&R.tagNameCheck(C)))return!1;if(ft&&!gt[C]){var it=Z(d)||d.parentNode,It=J(d)||d.childNodes;if(It&&it)for(var xt=It.length,wt=xt-1;wt>=0;--wt)it.insertBefore(B(It[wt],!0),F(d))}return Gt(d),!0}return d instanceof f&&!Ba(d)||(C==="noscript"||C==="noembed"||C==="noframes")&&Lt(/<\/no(script|embed|frames)/i,d.innerHTML)?(Gt(d),!0):(dt&&d.nodeType===3&&(E=d.textContent,E=Ft(E,N," "),E=Ft(E,q," "),E=Ft(E,U," "),d.textContent!==E&&(Me(t.removed,{element:d.cloneNode()}),d.textContent=E)),$t("afterSanitizeElements",d,null),!1)},Ui=function(d,E,C){if(z&&(E==="id"||E==="name")&&(C in a||C in qa))return!1;if(!(Mt&&!ht[E]&&Lt(et,E))){if(!(lt&&Lt(K,E))){if(!y[E]||ht[E]){if(!(Bi(d)&&(R.tagNameCheck instanceof RegExp&&Lt(R.tagNameCheck,d)||R.tagNameCheck instanceof Function&&R.tagNameCheck(d))&&(R.attributeNameCheck instanceof RegExp&&Lt(R.attributeNameCheck,E)||R.attributeNameCheck instanceof Function&&R.attributeNameCheck(E))||E==="is"&&R.allowCustomizedBuiltInElements&&(R.tagNameCheck instanceof RegExp&&Lt(R.tagNameCheck,C)||R.tagNameCheck instanceof Function&&R.tagNameCheck(C))))return!1}else if(!ti[E]){if(!Lt($,Ft(C,at,""))){if(!((E==="src"||E==="xlink:href"||E==="href")&&d!=="script"&&Os(C,"data:")===0&&Ci[d])){if(!(_t&&!Lt(O,Ft(C,at,"")))){if(C)return!1}}}}}}return!0},Bi=function(d){return d.indexOf("-")>0},Wi=function(d){var E,C,it,It;$t("beforeSanitizeAttributes",d,null);var xt=d.attributes;if(xt){var wt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:y};for(It=xt.length;It--;){E=xt[It];var Re=E,yt=Re.name,ri=Re.namespaceURI;if(C=yt==="value"?E.value:Ps(E.value),it=vt(yt),wt.attrName=it,wt.attrValue=C,wt.keepAttr=!0,wt.forceKeepAttr=void 0,$t("uponSanitizeAttribute",d,wt),C=wt.attrValue,!wt.forceKeepAttr&&(ni(yt,d),!!wt.keepAttr)){if(!Nt&&Lt(/\/>/i,C)){ni(yt,d);continue}dt&&(C=Ft(C,N," "),C=Ft(C,q," "),C=Ft(C,U," "));var Gi=vt(d.nodeName);if(Ui(Gi,it,C)){if(G&&(it==="id"||it==="name")&&(ni(yt,d),C=rt+C),j&&ne(I)==="object"&&typeof I.getAttributeType=="function"&&!ri)switch(I.getAttributeType(Gi,it)){case"TrustedHTML":{C=j.createHTML(C);break}case"TrustedScriptURL":{C=j.createScriptURL(C);break}}try{ri?d.setAttributeNS(ri,yt,C):d.setAttribute(yt,C),na(t.removed)}catch{}}}}$t("afterSanitizeAttributes",d,null)}},Ga=function H(d){var E,C=ji(d);for($t("beforeSanitizeShadowDOM",d,null);E=C.nextNode();)$t("uponSanitizeShadowNode",E,null),!qi(E)&&(E.content instanceof s&&H(E.content),Wi(E));$t("afterSanitizeShadowDOM",d,null)};return t.sanitize=function(H){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E,C,it,It,xt;if(ei=!H,ei&&(H="<!-->"),typeof H!="string"&&!xe(H))if(typeof H.toString=="function"){if(H=H.toString(),typeof H!="string")throw di("dirty is not a string, aborting")}else throw di("toString is not a function");if(!t.isSupported){if(ne(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof H=="string")return i.toStaticHTML(H);if(xe(H))return i.toStaticHTML(H.outerHTML)}return H}if(Tt||ai(d),t.removed=[],typeof H=="string"&&(pt=!1),pt){if(H.nodeName){var wt=vt(H.nodeName);if(!w[wt]||W[wt])throw di("root node is forbidden and cannot be sanitized in-place")}}else if(H instanceof l)E=zi("<!---->"),C=E.ownerDocument.importNode(H,!0),C.nodeType===1&&C.nodeName==="BODY"||C.nodeName==="HTML"?E=C:E.appendChild(C);else{if(!h&&!dt&&!mt&&H.indexOf("<")===-1)return j&&x?j.createHTML(H):H;if(E=zi(H),!E)return h?null:x?ct:""}E&&r&&Gt(E.firstChild);for(var Re=ji(pt?H:E);it=Re.nextNode();)it.nodeType===3&&it===It||qi(it)||(it.content instanceof s&&Ga(it.content),Wi(it),It=it);if(It=null,pt)return H;if(h){if(m)for(xt=p.call(E.ownerDocument);E.firstChild;)xt.appendChild(E.firstChild);else xt=E;return(y.shadowroot||y.shadowrootmod)&&(xt=c.call(e,xt,!0)),xt}var yt=mt?E.outerHTML:E.innerHTML;return mt&&w["!doctype"]&&E.ownerDocument&&E.ownerDocument.doctype&&E.ownerDocument.doctype.name&&Lt(Ys,E.ownerDocument.doctype.name)&&(yt="<!DOCTYPE "+E.ownerDocument.doctype.name+`>
`+yt),dt&&(yt=Ft(yt,N," "),yt=Ft(yt,q," "),yt=Ft(yt,U," ")),j&&x?j.createHTML(yt):yt},t.setConfig=function(H){ai(H),Tt=!0},t.clearConfig=function(){me=null,Tt=!1},t.isValidAttribute=function(H,d,E){me||ai({});var C=vt(H),it=vt(d);return Ui(C,it,E)},t.addHook=function(H,d){typeof d=="function"&&(L[H]=L[H]||[],Me(L[H],d))},t.removeHook=function(H){if(L[H])return na(L[H])},t.removeHooks=function(H){L[H]&&(L[H]=[])},t.removeAllHooks=function(){L={}},t}var Qe=Ta();const Js={text:["headline","text"],media:["caption","credit"]},Ks={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Qe.addHook("afterSanitizeAttributes",function(i){if(i.nodeName=="A"&&"href"in i){"target"in i.attributes||i.setAttribute("target","_blank");let t=i.attributes.rel;t?t.value.indexOf("noopener")==-1&&i.setAttribute("rel",`noopener ${t.value}`):i.setAttribute("rel","noopener")}});function da(i,t,e){Object.keys(e).forEach(a=>{var s=a=="slide"?i:i[a];s&&e[a].forEach(o=>{typeof s[o]<"u"&&(s[o]=t(s[o]))})})}function Qs(i){return Qe.sanitize(i,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class he{constructor(t){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof t=="object"&&t.events){if(this.scale=t.scale,this.events=[],this._ensureValidScale(t.events),t.title){var e=this._assignID(t.title);this._tidyFields(t.title),this.title=t.title,this.event_dict[e]=this.title}for(var a=0;a<t.events.length;a++)try{this.addEvent(t.events[a],!0)}catch(s){this.logError(s)}t.eras&&t.eras.forEach((s,o)=>{try{this.addEra(s)}catch(l){this.logError("Era "+o+": "+l)}}),Oe(this.events),Oe(this.eras)}}logError(t){tt(`logError: ${t}`),this.messages.errors.push(t)}getErrors(t){return t?this.messages.errors.join(t):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var t=0;t<this.eras.length;t++)if(typeof this.eras[t].start_date>"u"||typeof this.eras[t].end_date>"u"){var e;this.eras[t].headline?e=this.eras[t].headline:e="era "+(t+1),this.logError("All eras must have start and end dates. ["+e+"]")}}isValid(){return this.messages.errors.length==0}addEvent(t,e){var a=this._assignID(t);return typeof t.start_date>"u"?(tt("Missing start date, skipping event"),console.log(t),null):(this._processDates(t),this._tidyFields(t),this.events.push(t),this.event_dict[a]=t,e||Oe(this.events),a)}addEra(t){var e=this._assignID(t);if(typeof t.start_date>"u")throw new Q("missing_start_date_err",e);this._processDates(t),this._tidyFields(t),this.eras.push({start_date:t.start_date,end_date:t.end_date,headline:t.text.headline})}_assignID(t){var e=t.unique_id;return Rt(e)||(e=t.text?oi(t.text.headline):null),t.unique_id=ns(this.event_dict,e),t.unique_id}_makeUniqueIdentifiers(t,e){for(var a=[t],s=0;s<e.length;s++)Rt(e[s].unique_id)&&(e[s].unique_id=oi(e[s].unique_id),a.indexOf(e[s].unique_id)==-1?a.push(e[s].unique_id):e[s].unique_id="");if(a.length!=e.length+1){for(var s=0;s<e.length;s++)if(!e[s].unique_id){var o=e[s].text?oi(e[s].text.headline):null;o||(o=de(6)),a.indexOf(o)!=-1&&(o=o+"-"+s),a.push(o),e[s].unique_id=o}}}_ensureValidScale(t){if(!this.scale){this.scale="human";for(var e=0;e<t.length;e++){if(t[e].scale=="cosmological"){this.scale="cosmological";break}if(t[e].start_date&&typeof t[e].start_date.year<"u"){var a=new Je(t[e].start_date),s=a.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}tt(`Determining scale dynamically: ${this.scale}`)}var o=aa[this.scale];o||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(t){var e=aa[this.scale];if(!(t.start_date instanceof e)){var a=t.start_date;if(t.start_date=new e(a),typeof t.end_date<"u"&&!(t.end_date instanceof e)){var s=t.end_date,o=!0;for(let l in a)o=o&&a[l]==s[l];o?(tt("End date same as start date is redundant; dropping end date"),delete t.end_date):t.end_date=new e(s)}}}getEarliestDate(){var t=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(t)?this.eras[0].start_date:t}getLatestDate(){for(var t=[],e=0;e<this.events.length;e++)this.events[e].end_date?t.push({date:this.events[e].end_date}):t.push({date:this.events[e].start_date});for(var e=0;e<this.eras.length;e++)this.eras[e].end_date?t.push({date:this.eras[e].end_date}):t.push({date:this.eras[e].start_date});return Oe(t,"date"),t.slice(-1)[0].date}_tidyFields(t){function e(a,s,o){o||(o=""),a.hasOwnProperty(s)||(a[s]=o)}t.group&&(t.group=Rt(t.group)),t.text||(t.text={}),e(t.text,"text"),e(t.text,"headline"),da(t,Qs,Js),da(t,ps,Ks)}}function tn(i,t){return i==null?"":(t=t||`
`,i.charAt(i.length-t.length)!==t?i:i.substring(0,i.length-t.length))}async function en(i){return new Promise((t,e)=>{if(i.data){var a=xa(Ma(i.data,i),i);a.useMemoryStore=!0,t(a)}else i.url&&window.fetch(i.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(o=>{e(JSON.parse(o))}):e({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var o=nn(s,i);o.useMemoryStore=!0,t(o)}}).catch(s=>{e({status_code:500,message:`Error fetching CSV: ${s}`})})})}function xa(i,t){return t=t||{},t.noHeaderRow!==!0&&i.length>0?{fields:i[0].map((e,a)=>e&&e.trim?e.trim():`untitled${a}`),records:i.slice(1)}:{records:i}}function an(i){var t={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var e in i)e==="trim"?t.skipinitialspace=i.trim:t[e.toLowerCase()]=i[e];return t}function Ma(i,t){(!t||t&&!t.lineterminator)&&(i=sn(i,t));var e=an(t);i=tn(i,e.lineterminator);var a="",s=!1,o=!1,l="",f=[],b=[],v,g;for(g=function(_){return o!==!0&&(_===""?_=null:e.skipinitialspace===!0&&(_=_.trim())),_},v=0;v<i.length;v+=1)a=i.charAt(v),s===!1&&(a===e.delimiter||a===e.lineterminator)?(l=g(l),f.push(l),a===e.lineterminator&&(b.push(f),f=[]),l="",o=!1):a!==e.quotechar?l+=a:s?i.charAt(v+1)===e.quotechar?(l+=e.quotechar,v+=1):s=!1:(s=!0,o=!0);return l=g(l),f.push(l),b.push(f),e.skipinitialrows&&(b=b.slice(e.skipinitialrows)),b}function sn(i,t){return t&&!t.lineterminator?i.replace(/(\r\n|\n|\r)/gm,`
`):i}function nn(i,t){let e=xa(Ma(i,t)),a=[];return e.records.forEach(s=>{let o={};e.fields.forEach((l,f)=>o[l]=s[f]),a.push(o)}),a}function pe(i){if(i)return i.replace(/[\s,]+/g,"")}function rn(i){let t={key:null,worksheet:0};var e=/\bkey=([-_A-Za-z0-9]+)&?/i,a=/docs.google.com\/spreadsheets(.*?)\/d\//;if(i.match(e))t.key=i.match(e)[1];else if(i.match(a)){var s=i.search(a)+i.match(a)[0].length,o=i.substr(s);t.key=o.split("/")[0],i.match(/\?gid=(\d+)/)&&(t.worksheet=i.match(/\?gid=(\d+)/)[1])}else i.match(/^\b[-_A-Za-z0-9]+$/)&&(t.key=i);return t.key?t:null}function on(i){return typeof i!="string"?"":i.match(/^(https?:)?\/\/?/)?{url:i}:{color:i}}function ln(i){let t={};Object.keys(i).forEach(a=>{t[a]=Rt(i[a])});var e={media:{caption:t["Media Caption"]||"",credit:t["Media Credit"]||"",url:t.Media||"",thumbnail:t["Media Thumbnail"]||""},text:{headline:t.Headline||"",text:t.Text||""},display_date:t["Display Date"]||"",group:t.Group||t.Tag||"",background:on(t.Background),type:t.Type||""};if(Object.keys(t).includes("Start Date")||Object.keys(t).includes("End Date"))t["Start Date"]&&(e.start_date=Ji(t["Start Date"])),t["End Date"]&&(e.end_date=Ji(t["End Date"]));else{if(t.Year&&(e.start_date={year:pe(t.Year),month:pe(t.Month)||"",day:pe(t.Day)||""}),t["End Year"]&&(e.end_date={year:pe(t["End Year"])||"",month:pe(t["End Month"])||"",day:pe(t["End Day"])||""}),t.Time)if(e.start_date)st(e.start_date,ea(t.Time));else throw new Q("invalid_start_time_without_date");if(t["End Time"])if(e.end_date)st(e.end_date,ea(t["End Time"]));else throw new Q("invalid_end_time_without_date");if(e.start_date&&!ia(e.start_date))throw new Q("invalid_date_err");if(e.end_date&&!ia(e.end_date))throw new Q("invalid_date_err")}return e}async function hn(i,t){let e=[];i=dn(i),await en({url:`${t}${i}`}).then(s=>{e=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new Q("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let o="undefined error";throw Array.isArray(s.message)?o=s.message.join("<br>"):o=String(s.message),new Q(o)});let a={events:[],errors:[],warnings:[],eras:[]};return e.forEach((s,o)=>{try{if(!rs(s)){let l=ln(s);fn(l,a)}}catch(l){if(l.constructor==Q)a.errors.push(l);else{l.message&&(l=l.message);let f=s.Headline||o;a.errors.push(l+`[${f}]`)}}}),a}function dn(i){if(i=i.trim(),i.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${i}/pub?output=csv`;if(i.startsWith("https://docs.google.com/spreadsheets/")){if(i.match(/\/pub\?output=csv$/))return i;let t=new URL(i),e=new URLSearchParams(t.search);e.set("output","csv"),e.get("gid")&&e.set("single","true"),t.search=`?${e.toString()}`;let a=t.pathname.substr(0,t.pathname.lastIndexOf("/"));return t.pathname=`${a}/pub`,t.toString()}throw new Q("invalid_url_err",i)}async function cn(i,t){if(!t.sheets_proxy)throw new Q("Proxy option must be set to read data from Google");var e=await hn(i,t.sheets_proxy);if(e)return e}async function un(i,t){let e=null,a={};if(typeof t=="function"?e=t:typeof t=="object"&&(a=t,e=t.callback,typeof a.callback=="function"&&(e=a.callback)),!e)throw new Q("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,o,l=rn(i);if(l){try{o=await cn(i,a)}catch(b){s=new he,b.name=="NetworkError"?s.logError(new Q("network_err")):b.name=="TLError"?s.logError(b):s.logError(new Q("unknown_read_err",b.name)),e(s);return}if(s=new he(o),o.errors)for(var f=0;f<o.errors.length;f++)s.logError(o.errors[f]);e(s)}else Te({url:i,dataType:"json",success:function(b){try{s=new he(b)}catch(v){s=new he,s.logError(v)}e(s)},error:function(b,v,g){if(s=new he,v=="parsererror")var g=new Q("invalid_url_err");else var g=new Q("unknown_read_err",v);s.logError(g),e(s)}})}function fn(i,t){var e="event";typeof i.type<"u"&&(e=i.type,delete i.type),e=="title"?t.title?(t.warnings.push("Multiple title slides detected."),t.events.push(i)):t.title=i:e=="era"?t.eras.push(i):t.events.push(i)}class _n{constructor(t){if(t)this.scale=t.scale,this.minor=t.minor,this.major=t.major;else throw new Q("axis_helper_no_options_err")}getPixelsPerTick(t){return t*this.minor.factor}getMajorTicks(t){return this._getTicks(t,this.major)}getMinorTicks(t){return this._getTicks(t,this.minor)}_getTicks(t,e){for(var a=t._scaled_padding*e.factor,s=t._earliest-a,o=t._latest+a,l=[],f=s;f<o;f+=e.factor)l.push(t.getDateFromTime(f).floor(e.name));return{name:e.name,ticks:l}}}var Li={},Ea=function(i,t){Li[i]=[];for(var e=0;e<t.length-1;e++){var a=t[e],s=t[e+1];Li[i].push(new _n({scale:a[3],minor:{name:a[0],factor:a[1]},major:{name:s[0],factor:s[1]}}))}};Ea("human",qt);Ea("cosmological",ze);function mn(i,t){typeof t!="number"&&(t=100);var e=i.getScale(),a=Li[e];if(!a)throw new Q("axis_helper_scale_err",e);for(var s=null,o=0;o<a.length;o++){var l=a[o],f=l.getPixelsPerTick(i._pixels_per_milli);if(f>t){if(s==null)return l;var b=Math.abs(t-f),v=Math.abs(t-f);return b<v?l:s}s=l}return a[a.length-1]}const pn={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class ca{constructor(t,e){var a=t.events;this._scale=t.scale,e=st({display_width:500,screen_multiplier:3,max_rows:null},e),this._display_width=e.display_width,this._screen_multiplier=e.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=t.getEarliestDate().getTime(),this._latest=t.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(t)),this._average=this._span_in_millis/a.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=mn(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(a,e.max_rows)}_computeDefaultSpan(t){if(t.scale=="human"){for(var e={},a=0;a<t.events.length;a++){var s=t.events[a].start_date.findBestFormat();e[s]=e[s]?e[s]+1:1}for(var a=qt.length-1;a>=0;a--)if(e.hasOwnProperty(qt[a][0])){var o=qt[qt.length-1];return qt[a+1]&&(o=qt[a+1]),o[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(t){return(t-this._earliest)*this._pixels_per_milli}getPositionInfo(t){return this._positions[t]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(t){if(this._scale=="human")return new Xe(t);if(this._scale=="cosmological")return new Je(new Se(t));throw new Q("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(t){for(var e=[],a=!1,s=0;s<t.length;s++)t[s].group&&(e.indexOf(t[s].group)<0?e.push(t[s].group):a=!0);return e.length&&a&&e.push(""),e}_computeRowInfo(t,e){for(var a=[],s=0,o=0;o<t.length;o++){var l=t[o],f=[];delete l.row;for(var b=0;b<a.length;b++)if(f.push(a[b].end-l.start),f[b]<=0){l.row=b,a[b]=l;break}if(typeof l.row>"u")if(e===null)l.row=a.length,a.push(l);else if(e>0)l.row=a.length,a.push(l),e--;else{var v=Math.min.apply(null,f),g=f.indexOf(v);l.row=g,l.end>a[g].end&&(a[g]=l),s++}}return{n_rows:a.length,n_overlaps:s}}_computePositionInfo(t,e,a){a=a||100;for(var s=[],o=!1,l=0;l<t.length;l++){var f={start:this.getPosition(t[l].start_date.getTime())};if(this._positions.push(f),typeof t[l].end_date<"u"){var b=this.getPosition(t[l].end_date.getTime());f.width=b-f.start,f.width>a?f.end=f.start+f.width:f.end=f.start+a}else f.width=a,f.end=f.start+a;t[l].group?s.indexOf(t[l].group)<0&&s.push(t[l].group):o=!0}if(s.length){o&&s.push("");for(var g=[],l=0;l<s.length;l++)g[l]={label:s[l],idx:l,positions:[],n_rows:1,n_overlaps:0};for(var l=0;l<this._positions.length;l++){var f=this._positions[l];f.group=s.indexOf(t[l].group||""),f.row=0;for(var _=g[f.group],A=_.positions.length-1;A>=0;A--)_.positions[A].end>f.start&&_.n_overlaps++;_.positions.push(f)}for(var I=s.length;;){var P=Math.max(0,e-I);if(!P||(g.sort(function(Z,X){return Z.n_overlaps>X.n_overlaps?-1:Z.n_overlaps<X.n_overlaps?1:Z.idx-X.idx}),!g[0].n_overlaps))break;for(var I=0,l=0;l<g.length;l++){var _=g[l];if(_.n_overlaps&&P){var B=this._computeRowInfo(_.positions,_.n_rows+1);_.n_rows=B.n_rows,_.n_overlaps=B.n_overlaps,P--}I+=_.n_rows}}this._number_of_rows=I,this._group_labels=[],g.sort(function(J,Z){return J.idx-Z.idx});for(var l=0,F=0;l<g.length;l++){this._group_labels.push({label:g[l].label,rows:g[l].n_rows});for(var A=0;A<g[l].positions.length;A++){var f=g[l].positions[A];f.row+=F}F+=g[l].n_rows}}else{var v=this._computeRowInfo(this._positions,e);this._number_of_rows=v.n_rows}}getAxisTickDateFormat(t){return this._scale=="cosmological"?"compact":pn[t]}}class La{constructor(t){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=D("div","tl-timegroup"),st(this.data,t),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(t,e){}setRowPosition(t,e){this.options.height=e*this.data.rows,this.setPosition({top:t}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(t,e){var a="tl-timegroup";t&&(a+=" tl-timegroup-alternate"),e&&(a+=" tl-timegroup-hidden"),this._el.container.className=a}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=D("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Y.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(t,e,a){}}Dt(La,At,Jt);class Sa{constructor(t,e,a,s){this.start_date=t,this.end_date=e,this.headline=a,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:Ye,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,st(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(t){var e=12,a=1;this._el.content_container.style.height=t+"px",this._el.content.className="tl-timeera-content",$e?(a=Math.floor(t/(e+2)),a<1&&(a=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=a):(a=t/e,a>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=a*e+"px")}setWidth(t){this.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,e){this.setPosition({top:t}),e<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(t){this._el.container.className="tl-timeera tl-timeera-color"+t}_initLayout(){this._el.container=D("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=D("div","tl-timeera-content-container",this._el.container),this._el.background=D("div","tl-timeera-background",this._el.content_container),this._el.content=D("div","tl-timeera-content",this._el.content_container),this._el.text=D("div","tl-timeera-text",this._el.content),this._text=D("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=ve(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(t,e,a){t&&(this.options.width=t),e&&(this.options.height=e)}}Dt(Sa,At,Jt);function gn(i){const t=i.getBoundingClientRect();return t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}class Da{constructor(t,e,a){a&&this.setLanguage(a),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:Ye,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof t=="object"?this._el.container=t:this._el.container=Ae(t),st(this.options,e),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(t,e){var a=t.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(a.major.ticks,this._el.major,t.getAxisTickDateFormat(a.major.name)),this.minor_ticks=this._createTickElements(a.minor.ticks,this._el.minor,t.getAxisTickDateFormat(a.minor.name),a.major.ticks),this.positionTicks(t,e,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(t,e,a,s){e.innerHTML="";var o={},l=new Date(-1,13,-30);if(o[l.getTime()]=!0,s)for(var f=0;f<s.length;f++)o[s[f].getTime()]=!0;for(var b=[],f=0;f<t.length;f++){var v=t[f];if(!(v.getTime()in o)){var g=D("div","tl-timeaxis-tick",e),_=D("span","tl-timeaxis-tick-text tl-animate-opacity",g);let I=v.getDisplayDate(this.getLanguage(),a);_.innerHTML=I,b.push({tick:g,tick_text:_,display_date:I,date:v})}}return b}positionTicks(t,e,a){a?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,t,e),this._positionTickArray(this.minor_ticks,t,e)}_positionTickArray(t,e,a){if(t[1]&&t[0]){var s=e.getPosition(t[1].date.getMillisecond())-e.getPosition(t[0].date.getMillisecond()),o=1;s<a&&(o=Math.round(a/e.getPixelsPerTick()));for(var l=1,f=0;f<t.length;f++){var b=t[f];b.tick.style.left=e.getPosition(b.date.getMillisecond())+"px",b.tick_text.innerHTML=b.display_date,o>1?l>=o?(l=1,b.tick_text.style.opacity=1,b.tick.className="tl-timeaxis-tick"):(l++,b.tick_text.style.opacity=0,b.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(b.tick_text.style.opacity=1,b.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(t){return t.filter(({tick:e})=>gn(e))}_initLayout(){this._el.content_container=D("div","tl-timeaxis-content-container",this._el.container),this._el.major=D("div","tl-timeaxis-major",this._el.content_container),this._el.minor=D("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(t,e,a){t&&(this.options.width=t),e&&(this.options.height=e)}}Dt(Da,At,Jt,Qt);class Aa{constructor(t,e,a){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},ds(this,t),st(this.options,e),this._el.container=D("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),a&&a.appendChild(this._el.container)}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(t){this._el.date.innerHTML=t}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=D("div","tl-text-content-container",this._el.container),this._el.headline_container=D("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var t="tl-headline";this.options.title&&(t="tl-headline tl-headline-title"),this._el.headline=D("h2",t,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=D("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var e="";e+=cs(this.options.autolink==!0?bi(this.data.text):this.data.text),this._el.content=D("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=e}this.onLoaded()}}Dt(Aa,At);class ot{constructor(t,e,a){a&&this.setLanguage(a),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},st(this.options,e),st(this.data,t),this.options.background||(this._el.container=D("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){t.loadingMessage(),t._loadMedia(),t._updateDisplay()},1200)}catch(e){tt("Error loading media for ",this._media),tt(e)}}_updateMessage(t){this.message&&this.message.updateMessage(t)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(t){t?t=this._("error")+": "+t:t=this._("error"),this._updateMessage(t)}updateMediaDisplay(t){this._state.loaded&&!this.options.background&&(ue?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",be&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(t),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(t){be&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(t,e){return""}show(){}hide(){}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}getImageURL(t,e){return this._getImageURL(t,e)}updateDisplay(t,e,a){this._updateDisplay(t,e,a)}stopMedia(){try{this._stopMedia()}catch(t){tt(`stopMedia() exception: ${t}`)}}loadErrorDisplay(t){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=D("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+t+"</p>",this.onLoaded(!0)}onLoaded(t){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),t||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(t){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(t,e){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=D("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?bi(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=D("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?bi(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=D("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=D("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new Ke(this._el.container,this.options,this.getLanguage()),this._el.content_container=D("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=D("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=D("div","tl-media-content",this._el.link)):this._el.content=D("div","tl-media-content",this._el.content_container)}_updateDisplay(t,e,a){t&&(this.options.width=t),e&&(this.options.height=e),a&&(this.options.layout=a),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...t){return D(...t)}_stopMedia(){}}Dt(ot,At,Qt);class ua extends ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=this,e="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(e="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",e,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=we(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=we(this.data.caption)),this._el.content_item.addEventListener("load",function(a){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(t,e){return Ve(this.data.url)}_updateMediaDisplay(t){be&&(this._el.content_item.style.width="auto")}}class vn{constructor(t){this.doc=t,this.pending={},this.queue={css:[],js:[]},this.styleSheets=t.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(t,e){var a=this.doc.createElement(t),s;for(s in e)e.hasOwnProperty(s)&&a.setAttribute(s,e[s]);return a}finish(t){var e=this.pending[t],a,s;e&&(a=e.callback,s=e.urls,s.shift(),this.pollCount=0,s.length||(a&&a.call(e.context,e.obj),this.pending[t]=null,this.queue[t].length&&this.load(t)))}getEnv(){var t=navigator.userAgent,e={async:this.doc.createElement("script").async===!0};return(e.webkit=/AppleWebKit\//.test(t))||(e.ie=/MSIE/.test(t))||(e.opera=/Opera/.test(t))||(e.gecko=/Gecko\//.test(t))||(e.unknown=!0),e}load(t,e,a,s,o){var l=(function(){this.finish(t)}).bind(this),f=t==="css",b=[],v,g,_,A,I,P;if(e)if(e=typeof e=="string"?[e]:e.concat(),f||this.env.async||this.env.gecko||this.env.opera)this.queue[t].push({urls:e,callback:a,obj:s,context:o});else for(v=0,g=e.length;v<g;++v)this.queue[t].push({urls:[e[v]],callback:v===g-1?a:null,obj:s,context:o});if(!(this.pending[t]||!(A=this.pending[t]=this.queue[t].shift()))){for(I=A.urls,v=0,g=I.length;v<g;++v)P=I[v],f?_=this.env.gecko?this.createNode("style"):this.createNode("link",{href:P,rel:"stylesheet"}):(_=this.createNode("script",{src:P}),_.async=!1),_.className="lazyload",_.setAttribute("charset","utf-8"),this.env.ie&&!f?_.onreadystatechange=function(){/loaded|complete/.test(_.readyState)&&(_.onreadystatechange=null,l())}:f&&(this.env.gecko||this.env.webkit)?this.env.webkit?(A.urls[v]=_.href,this.pollWebKit()):(_.innerHTML='@import "'+P+'";',this.pollGecko(_)):_.onload=_.onerror=l,b.push(_);for(v=0,g=b.length;v<g;++v)this.head.appendChild(b[v])}}pollGecko(t){var e;try{e=!!t.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var a=this;setTimeout(function(){a.pollGecko(t)},50)}else e&&this.finish("css");return}this.finish("css")}pollWebKit(){var t=this.pending.css,e;if(t){for(e=this.styleSheets.length;--e>=0;)if(this.styleSheets[e].href===t.urls[0]){this.finish("css");break}this.pollCount+=1,t&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(t,e,a,s){this.load("css",t,e,a,s)}js(t,e,a,s){this.load("js",t,e,a,s)}}function ce(i,t,e,a){Na.js(i,t,e,a)}function mi(i,t,e,a){Na.css(i,t,e,a)}let Na=new vn(document);class yn extends ot{_loadMedia(){var t=this,e;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=de(7),e=us(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=e.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:tt("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=li(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=li(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=li(this.data.url.split("end=")[1])),this.media_id.hd=typeof e.hd<"u",ce("https://www.youtube.com/iframe_api",function(){t.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=fe.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(t){tt(t)}}createMedia(){var t=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout(function(){t.createMedia()},1e3)}onPlayerReady(t){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(t){t.data==YT.PlayerState.ENDED&&(t.target.seekTo(0),t.target.pauseVideo())}}class bn extends ot{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var t=fe.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=t.h+"px"}}makeGoogleMapsEmbedURL(t,e){var a=!1;function s(_){function A(B,F){if(B.slice(-1)=="z")F.zoom=B;else if(B.slice(-1)=="m")F.zoom=14,F.maptype="satellite";else if(B.slice(-1)=="t"){if(a=!0,P=="place")var J=_.match(g.place)[3]+","+_.match(g.place)[4];else{var J=F.center;delete F.center}F={},F.location=J,streetview_params=B.split(",");for(let X in o.streetview){var Z=parseInt(X)+1;o.streetview[X]=="pitch"&&streetview_params[Z]=="90t"?F[o.streetview[X]]=0:F[o.streetview[X]]=streetview_params[Z].slice(0,-1)}}return F}function I(B,F){var J={},Z=F[1],X=F[F.length-1];for(let ct in o[B]){var j=parseInt(ct)+2;o[B][ct]=="center"?J[o[B][ct]]=F[j]+","+F[++j]:J[o[B][ct]]=F[j]}return J=A(X,J),J.key=e,a==!0&&(B="streetview"),Z+"/embed/v1/"+B+fs(J)}let P="view";return _.match(g.place)?P="place":_.match(g.directions)?P="directions":_.match(g.search)&&(P="search"),I(P,_.match(g[P]))}var o={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},l=/(https:\/\/.+google.+?\/maps)/,f=/@([-\d.]+),([-\d.]+)/,b=/([\w\W]+)/,v=/,((?:[-\d.]+[zmayht],?)*)/,g={view:new RegExp(l.source+"/"+f.source+v.source),place:new RegExp(l.source+"/place/"+b.source+"/"+f.source+v.source),directions:new RegExp(l.source+"/dir/"+b.source+"/"+b.source+"/"+f.source+v.source),search:new RegExp(l.source+"/search/"+b.source+"/"+f.source+v.source)};return s(t)}}class wn extends ot{constructor(t,e,a){super(t,e,a),this.blockquote=Qe.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class kn extends ot{_loadMedia(){var t,e,a=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),e=this.data.url.split("//")[1].split(".wikipedia")[0],t="https://"+e+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Te({type:"GET",url:t,dataType:"json",success:function(s){a.createMedia(s)},error:function(s,o){var l="";l+=a._("wikipedia_load_err")+"<br/>"+a.media_id+"<br/>"+o,a.loadErrorDisplay(l)}})}createMedia(t){var e="";if(t.query){var a="",e={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};e.entry=_s(t.query.pages,0),e.extract=e.entry.extract,e.title=e.entry.title,e.page_image=e.entry.thumbnail,e.extract.match("<p>")?e.text_array=e.extract.split("<p>"):e.text_array.push(e.extract);for(var s=0;s<e.text_array.length;s++)s+1<=e.paragraphs&&s+1<e.text_array.length&&(e.text+="<p>"+e.text_array[s+1]);a+="<span class='tl-icon-wikipedia'></span>",a+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+e.title+"</a></h4>",a+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",e.page_image,a+=e.text,e.extract.match("REDIRECT")||(this._el.content_item.innerHTML=a,this.onLoaded())}}updateMediaDisplay(){}}function Tn(i){if(i.match(/^.+#\/media\/.+/))return`File:${i.split("#")[1].split(":")[1]}`;if(i.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let t=i.split("/");return t[t.length-1]}return null}function xn(i){let t={};if(i.query&&i.query.pages){let e=Object.keys(i.query.pages);t.page_id=e[0];let a=i.query.pages[t.page_id];t.url=a.imageinfo[0].thumburl,a.entityterms&&a.entityterms.label&&(t.label=a.entityterms.label[0])}return t}class fa extends ot{_loadMedia(){var t,e=this.options.width||1e3,a=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),t=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${e}&format=json&origin=*&wbetlanguage=${a}`,Be(t,function(o){let l=xn(o);l.url?(s.base_image_url=l.url,s.page_id=l.page_id,!s.data.alt&&l.label&&(s.data.alt=l.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(o){s.loadErrorDisplay(s._(o.message_key))}}establishMediaID(){let t=Tn(this.data.url);if(t)this.media_id=t;else throw new Q("Invalid Wikipedia Image URL")}createMedia(){var t=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let e=`M${this.page_id}`,a=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${e}&format=json&origin=*`;Ze(a).then(s=>{if(s.entities&&s.entities[e]){let o=s.entities[e].labels,l=t.getLanguage().lang.toLowerCase(),f=null;o[l]?f=o[l]:l.length>2&&o[l.substr(0,2)]?f=o[l.substr(0,2)]:o.en&&(f=o.en),f?(console.log(`wikibase_id: ${t.media_id} alt ${f.value}`),t.data.alt=f.value,t._el.content_item.alt=t.data.alt):console.log(`wikibase_id: ${t.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(e){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(t,e){if(t&&this.base_image_url){let a=this.base_image_url.match(/(\/\d+px-)/);if(a)return this.base_image_url.replace(a[1],`/${t}px-`)}return this.base_image_url}}class Mn extends ot{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,t="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Be(t,function(a){ce("https://w.soundcloud.com/player/api.js",function(){e.createMedia(a)})})}createMedia(t){this._el.content_item.innerHTML=t.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class En extends ot{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var a=null;this.data.url.match(/#t=([^&]+).*/)&&(a=this.data.url.match(/#t=([^&]+).*/)[1]),t="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",a&&(t=t+="&amp;#t="+a),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){e.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=fe.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){tt(t)}}}class Ln extends ot{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),t="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=fe.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class Sn extends ot{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var t=fe.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class Dn extends ot{_loadMedia(){var t,e=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?twitter.com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var a=this.data.url.match(/(status|statuses)\/(\d+)/);if(a&&a.length>2)this.media_id=a[2];else{e.loadErrorDisplay(e._("twitterembed_invalidurl_err"));return}}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Te({type:"GET",url:t,dataType:"json",success:function(s){e.createMedia(s)},error:function(s,o){var l="";l+=e._("twitter_load_err")+"<br/>"+e.media_id+"<br/>"+o,e.loadErrorDisplay(l)}})}createMedia(t){var e="",a="",s="",o="",l="",f="",b=this;a=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=t.author_url.split("twitter.com/")[1],o=t.html.split("</p>&mdash;")[1].split('<a href="')[1],l=o.split('">')[0],f=o.split('">')[1].split("</a>")[0],a=a.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),a.includes("pic.twitter.com")?(ce("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(b.media_id,b._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(e+=a,e+="<div class='vcard'>",e+="<a href='"+l+"' class='twitter-date' rel='noopener' target='_blank'>"+f+"</a>",e+="<img src='' class='tl-media-item tl-media-image'></a>",e+="<div class='author'>",e+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",e+="<span class='avatar'></span>",e+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",e+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",e+="</a>",e+="</div>",e+="</div>",this._el.content_item.innerHTML=e,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class An extends ot{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var a=this.data.url.match(/(status|statuses)\/(\d+)/);if(a&&a.length>2)this.media_id=a[2];else{e.loadErrorDisplay(e._("twitterembed_invalidurl_err"));return}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,o,l){var f,b=s.getElementsByTagName(o)[0],v=window.twttr||{};return s.getElementById(l)||(f=s.createElement(o),f.id=l,f.src="https://platform.twitter.com/widgets.js",b.parentNode.insertBefore(f,b),v._e=[],v.ready=function(g){v._e.push(g)}),v}(document,"script","twitter-wjs"),Te({type:"GET",url:t,dataType:"json",success(s){e.createMedia(s)},error:function(s,o){var l="";l+=e._("twitter_load_err")+"<br/>"+e.media_id+"<br/>"+o,e.loadErrorDisplay(l)}})}createMedia(t){var e="",a="",s="",o="",l="",f="";a=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=t.author_url.split("twitter.com/")[1],o=t.html.split("</p>&mdash;")[1].split('<a href="')[1],l=o.split('">')[0],f=o.split('">')[1].split("</a>")[0],a=a.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let b=this.media_id;a.includes("pic.twitter.com")?(twttr.ready(function(v){e=document.getElementsByClassName("tl-media-twitter")[0];var g=String(b);twttr.widgets.createTweet(g,e,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(_){this.onLoaded()})}),this._el.content_item.innerHTML=e,this.onLoaded()):(e+=a,e+="<div class='vcard'>",e+="<a href='"+l+"' class='twitter-date' rel='noopener' target='_blank'>"+f+"</a>",e+="<div class='author'>",e+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",e+="<span class='avatar'></span>",e+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",e+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",e+="</a>",e+="</div>",e+="</div>",this._el.content_item.innerHTML=e,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class _a extends ot{_loadMedia(){var t,e=this;try{this.establishMediaID(),t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Be(t,function(a){a.stat=="ok"?(e.sizes=a.sizes.size,e.options.background||e.createMedia(),e.onLoaded()):e.loadErrorDisplay(e._("flickr_notfound_err"))})}catch(a){e.loadErrorDisplay(e._(a.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var t=this.data.url.split("/").slice(-1)[0];this.media_id=ms.decode(t)}else{var e="flickr.com/photos/",a=this.data.url.indexOf(e);if(a==-1)throw new Q("flickr_invalidurl_err");var s=a+e.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var t=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=we(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=we(this.data.caption)),this._el.content_item.addEventListener("load",function(e){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(t,e){for(var a=this.size_label(e),s=this.sizes[this.sizes.length-2].source,o=0;o<this.sizes.length;o++)this.sizes[o].label==a&&(s=this.sizes[o].source);return s}_getMeta(){var t=this,e;e="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Be(e,function(a){t.data.credit_alternate="<a href='"+t.data.url+"' target='_blank' rel='noopener'>"+a.photo.owner.realname+"</a>",t.data.caption_alternate=a.photo.title._content+" "+a.photo.description._content,t.updateMeta()})}size_label(t){var e="";return t<=75?t<=0?e="Large":e="Thumbnail":t<=180?e="Small":t<=240?e="Small 320":t<=375?e="Medium":t<=480?e="Medium 640":(t<=600,e="Large"),e}}class Nn extends ot{_loadMedia(){var t=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=de(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||tt("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),ce(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){t.createMedia()})}_transformURL(t){return t.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const In="830b21071290df4f81a35c56abbea096",Cn="704270473831239",Rn=`${Cn}|${In}`,ma=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${Rn}&fields=html,thumbnail_url,author_name&url=`;function On(i){this.oembed_response=i,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=we(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=we(this.data.caption)),this._el.content_item.addEventListener("load",(function(t){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=i.thumbnail_url,this.onLoaded()}function Pn(i){let t=`${i.statusText} [${i.status}]`;i.status==400&&(t=this._("instagram_bad_request")),this.loadErrorDisplay(t)}class Hn extends ot{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let t=`${ma}${this.data.url}`;try{Te({url:t,dataType:"json",success:On,error:Pn,context:this})}catch(e){console.log(`Instagram: error fetching ${t}`),console.log(e);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;Ze(`${ma}${this.data.url}`).then(t=>t.thumbnail_url).catch(t=>{tt(`Instagram getImageURL Error: ${t.status} ${t.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(t){var e="";return t<=150?e="t":t<=306?e="m":e="l",e}}class Fn extends ot{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(t){be&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class zn extends ot{_loadMedia(){var t;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var e=this.data.url.match(/open\?id=([^&]+)/)[1];t="https://drive.google.com/file/d/"+e+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var e=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];t="https://drive.google.com/file/d/"+e+"/preview"}else t=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function jn(i){return i.match(/^spotify:/)?i:(i=new URL(i),`spotify${i.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class qn extends ot{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=jn(this.data.url),this.media_id?(t="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(t){var e=this.options.height,a=0,s=0;ue?e=this.options.height/2:e=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",tt(e),tt(this.options.width),e>this.options.width?(tt("height is greater"),a=this.options.width+80+"px",s=this.options.width+"px"):(tt("width is greater"),tt(this.options.width),a=e+"px",s=e-80+"px"),this.player.style.width=s,this.player.style.height=a,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class Un extends ot{constructor(t,e,a){super(t,e,a),this.iframe=Qe.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Bn extends ot{_loadMedia(){try{var t=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var e=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=e[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);ce(["https://s.imgur.com/min/embed.js"],function(){t.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var t=this,e="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Te({type:"GET",url:e,dataType:"json",success:function(a){try{t._el.content_item.innerHTML=a.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{tt("Error processing imgur ajax response")}},error:function(a,s,o){s=="parsererror"?t.loadErrorDisplay(t._("imgur_invalidurl_err")):t.loadErrorDisplay(t._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=fe.r16_9({w:this.options.width})+"px"}}class Wn extends ot{_loadMedia(){var t=Ve(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var e="";De||es||t.match(/dl.dropboxusercontent.com/)?e="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+t+"&amp;embedded=true'></iframe>":e="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this._el.content_item.innerHTML=e,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Gn extends ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=Ve(this.data.url),e=this,e=this,a="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",a,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){e.onMediaLoaded()}),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){be&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,e){var a=t.match(e),s="audio/";switch(a[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class $n extends ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=Ve(this.data.url),e=this,e=this,a="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",a,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){e.onMediaLoaded()}),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){be&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,e){var a=t.match(e),s="video/";switch(a[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class Vn extends ot{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],tt(`Wistia: media_id: ${this.media_id}`),t="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(a){e.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=fe.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){tt(t)}}}function Ge(i,t){var e={},a=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:yn},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:En},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:Ln},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:Sn},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:Mn},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?twitter.com",cls:Dn},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:An},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:bn},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:_a},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:_a},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:Hn},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:Fn},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:Nn},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:fa},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:fa},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:kn},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:ua},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:Bn},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:zn},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:Wn},{type:"spotify",name:"spotify",match_str:"spotify",cls:qn},{type:"iframe",name:"iFrame",match_str:"iframe",cls:Un},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:wn},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:$n},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:Vn},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:Gn},{type:"imageblank",name:"Imageblank",match_str:"",cls:ua}];if(t){if(i instanceof Array)return!1;for(var s=0;s<a.length;s++)switch(a[s].type){case"flickr":case"image":case"instagram":if(i.url.match(a[s].match_str))return e=a[s],e;break}}else for(var s=0;s<a.length;s++)if(i.url.match(a[s].match_str))return a[s];return!1}class Ia{constructor(t,e){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:Ye,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",st(this.options,e),st(this.data,t),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){this.active=t,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(t={preventScroll:!0}){this._el.container.focus(t)}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(t){var e=12,a=1;this._el.content_container.style.height=t+"px",this._el.timespan_content.style.height=t+"px",t<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",t<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),$e?(a=Math.floor(t/(e+2)),a<1&&(a=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=a):(a=t/e,a>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=a*e+"px")}setWidth(t){this.data.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,e){this.setPosition({top:t}),this._el.timespan.style.height=e+"px"}getFormattedDate(){if(Rt(this.data.display_date).length>0)return this.data.display_date;let t="";return this.data.end_date&&(t=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=(t?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+t),t}_onMarkerClick(t){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(t){/Space|Enter/.test(t.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(t){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=D("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=D("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=D("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=D("div","tl-timemarker-content-container",this._el.container),this._el.content=D("div","tl-timemarker-content",this._el.content_container),this._el.line_left=D("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=D("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=D("div","tl-timemarker-media-container",this._el.content);var t={url:this.data.media.thumbnail},e=this.data.media.thumbnail?Ge(t,!0):null;if(e){var a=new e.cls(t);a.on("loaded",(function(){this._el.media=D("img","tl-timemarker-media",this._el.media_container),this._el.media.src=a.getImageURL()}).bind(this)),a.loadMedia()}else{var s=Ge(this.data.media).type;this._el.media=D("span","tl-icon-"+s,this._el.media_container)}}this._el.text=D("div","tl-timemarker-text",this._el.content),this._text=D("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=ve(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=ve(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=ve(this.data.media.caption));const o=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${o}`,this.onLoaded()}_initEvents(){Y.addListener(this._el.container,"click",this._onMarkerClick,this),Y.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Y.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(t,e,a){t&&(this.options.width=t),e&&(this.options.height=e)}}Dt(Ia,Qt,At,Jt);class Ni{constructor(t,e,a){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},e&&(this._el.move=e),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:ke},this.animator=null,this.dragevent=this.mousedrag,Ut&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},st(this.options,a)}enable(t){Y.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Y.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Y.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Y.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){this.animator&&this.animator.stop(),Ut?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Y.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Y.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,Y.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Y.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){var e={x:0,y:0};this.data.sliding=!0,Ut?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),e.x=this.data.pagex.start-this.data.pagex.end,e.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(e.x-this.data.pos.start.x),this.data.new_pos.y=-(e.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(e.x)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(e.y)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},a={x:!1,y:!1},s=!1;this.data.direction=null,t.time=(new Date().getTime()-this.data.time.start)*10,e.time=(new Date().getTime()-this.data.time.start)*10,e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+t.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+t.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(e.x)>Math.abs(e.y)?a.x=!0:a.y=!0:this.options.enable.x?Math.abs(e.x)>Math.abs(e.y)&&(a.x=!0):Math.abs(e.y)>Math.abs(e.x)&&(a.y=!0),a.x&&(Math.abs(e.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right"))),a.y&&(Math.abs(e.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down"))),e.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Xt(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Le}))}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:Le};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&t.x>=this.options.constraint.left&&(t.x=this.options.constraint.left),this.options.constraint.right&&t.x<this.options.constraint.right&&(t.x=this.options.constraint.right),e.left=Math.floor(t.x)+"px"),this.animator=Xt(this._el.move,e),this.fire("momentum",this.data)}}Dt(Ni,At);class Ca{constructor(t,e,a,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=Ae(t),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=e,this.options={width:600,height:600,duration:1e3,ease:ke,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,st(this.options,a)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(t){for(var e=0;e<this._markers.length;e++){var a=this.timescale.getPositionInfo(e);t?this._markers[e].setClass("tl-timemarker tl-timemarker-fast"):this._markers[e].setClass("tl-timemarker"),this._markers[e].setPosition({left:a.start}),this._markers[e].setWidth(a.width)}}updateDisplay(t,e,a){let s=!1;t&&(this.options.width==0&&t>0&&(s=!0),this.options.width=t),e&&e!=this.options.height&&(this.options.height=e,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var t=0;try{t=parseInt(this.options.marker_height_min)}catch{tt("Invalid value for marker_height_min option."),t=30}return t==0&&(tt("marker_height_min option must not be zero."),t=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/t),this.max_rows<1&&(this.max_rows=1),new ca(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(t){this.options.scale_factor=t,this._updateDrawTimeline()}zoomIn(){var t=os(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}zoomOut(){var t=ls(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}setZoom(t){var e=this.options.zoom_sequence[t];typeof e=="number"?this.setZoomFactor(e):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(t){t<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),t>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),t==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),t=.1),this.options.scale_factor=t,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var t=this.timescale.getGroupLabels();if(t){this.options.has_groups=!0;for(var e=0;e<t.length;e++)this._createGroup(t[e])}}_createGroup(t){var e=new La(t);this._addGroup(e),this._groups.push(e)}_addGroup(t){t.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var t=this.options.height-this._el.timeaxis_background.offsetHeight,e=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var a=0,s=0;a<this._groups.length;a++){var o=Math.floor(s*(e+this.options.marker_padding)),l=!1;o>t-this.options.marker_padding&&(l=!0),this._groups[a].setRowPosition(o,this._calculated_row_height+this.options.marker_padding/2),this._groups[a].setAlternateRowColor(hs(a),l),s+=this._groups[a].data.rows}}}_addMarker(t){t.addTo(this._el.marker_item_container),t.on("markerclick",this._onMarkerClick,this),t.on("added",this._onMarkerAdded,this)}_createMarker(t,e){var a=new Ia(t,this.options);this._addMarker(a),e<0?this._markers.push(a):this._markers.splice(e,0,a)}_createMarkers(t){for(var e=0;e<t.length;e++)this._createMarker(t[e],-1)}_removeMarker(t){t.removeFrom(this._el.marker_item_container)}_destroyMarker(t){this._removeMarker(this._markers[t]),this._markers.splice(t,1)}_calculateMarkerHeight(t){return t/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(t){return t/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var t=this._calculateAvailableHeight(),e=this._calculateMarkerHeight(t);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(t);for(var a=0;a<this._markers.length;a++){this._markers[a].setHeight(e);var s=this.timescale.getPositionInfo(a).row,o=Math.floor(s*(e+this.options.marker_padding))+this.options.marker_padding,l=t-o+this.options.marker_padding;this._markers[a].setRowPosition(o,l)}}_resetMarkersActive(){for(var t=0;t<this._markers.length;t++)this._markers[t].setActive(!1)}_resetMarkersBlurListeners(){for(var t=0;t<this._markers.length;t++)this._markers[t].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(t){var e=-1;return(typeof t=="string"||t instanceof String)&&(e=ba(t,this._markers,"unique_id",e)),e}_createEras(t){for(var e=0;e<t.length;e++){var a=t[e],s=new Sa(a.start_date,a.end_date,a.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(t){for(var e=0,a=0;a<this._eras.length;a++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[a].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[a].end_date.getTime()),s.width=s.end-s.start,t?this._eras[a].setClass("tl-timeera tl-timeera-fast"):this._eras[a].setClass("tl-timeera"),this._eras[a].setPosition({left:s.start}),this._eras[a].setWidth(s.width),e++,e>5&&(e=0),this._eras[a].setColor(e)}}createMarker(t,e){this._createMarker(t,e)}createMarkers(t){this._createMarkers(t)}destroyMarker(t){this._destroyMarker(t)}destroyMarkerId(t){this.destroyMarker(this._findMarkerIndex(t))}goTo(t,e,a){var s=this.options.ease,o=this.options.duration,l=t<0?0:t;this._resetMarkersActive(),t>=0&&t<this._markers.length&&this._markers[t].setActive(!0),this.animateMovement(l,e,a,o,s),t>=0&&t<this._markers.length?this.current_id=this.current_focused_id=this._markers[t].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(t,e,a){this.goTo(this._findMarkerIndex(t),e,a)}focusOn(t,e,a){const s=this.options.ease,o=this.options.duration,l=t<0?0:t;this.animateMovement(l,e,a,o,s),this._resetMarkersBlurListeners(),t>=0&&t<this._markers.length&&(this._markers[t].setFocus(),this.current_focused_id=this._markers[t].data.unique_id,this._markers[t].on("markerblur",this._onMarkerBlur,this))}focusNext(){const t=this._findMarkerIndex(this.current_focused_id);t+1<this._markers.length?this.focusOn(t+1):this.focusOn(t)}focusPrevious(){const t=this._findMarkerIndex(this.current_focused_id);t-1>=0?this.focusOn(t-1):this.focusOn(t)}animateMovement(t,e,a,s,o){this.animator&&this.animator.stop(),e?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):a?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Xt(this._el.slider,{left:-this._markers[t].getLeft()+this.options.width/2+"px",duration:s,easing:o})),t>=0&&t<this._markers.length?this.current_id=this._markers[t].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(t,e,a){this.goTo(this._findMarkerIndex(t),e,a)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const t=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:t})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(t){this.fire("dateAdded",this.config)}_onEraAdded(t){this.fire("eraAdded",this.config)}_onMarkerRemoved(t){this.fire("dateRemoved",this.config)}_onMarkerClick(t){this.goToId(t.unique_id),this.fire("change",{unique_id:t.unique_id})}_onMarkerBlur(t){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(t){var e=0,a=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};t||(t=window.event),t.originalEvent&&(t=t.originalEvent),typeof t.wheelDeltaX<"u"&&(e=t.wheelDeltaY/6,Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?e=t.wheelDeltaX/6:e=0),e&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),a=parseInt(this._el.slider.style.left.replace("px",""))+e,a>s.left?a=s.left:a<s.right&&(a=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=a+"px"}_onDragMove(t){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(t){switch(Y.stopPropagation(t),t.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(t){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(t),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(t)}_updateDrawTimeline(t){var e=!1;if(t){var a=new ca(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==a.getMajorScale()&&this.timescale.getMinorScale()==a.getMinorScale()&&(e=!0)}else e=!0;return e?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),e}_setLabelWithCurrentMarker(){const t=this._markers[this._findMarkerIndex(this.current_focused_id)],e=t&&t.ariaLabel?`, ${t.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${e}`)}_initLayout(){this._el.line=D("div","tl-timenav-line",this._el.container),this._el.slider=D("div","tl-timenav-slider",this._el.container),this._el.slider_background=D("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=D("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=D("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=D("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=D("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=D("div","tl-timeaxis-background",this._el.container),this.timeaxis=new Da(this._el.timeaxis,this.options,this.language),this._swipable=new Ni(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Y.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Y.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Y.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Dt(Ca,At,Jt,Qt);var pi=function(){function i(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}}();function gi(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u")return;var i=Array.prototype.slice,t=Element.prototype.matches||Element.prototype.msMatchesSelector,e=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),a=function(){function v(g,_){gi(this,v),this._inertManager=_,this._rootElement=g,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return pi(v,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(_){this._unmanageNode(_.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(_){var A=this;l(_,function(F){return A._visitNode(F)});var I=document.activeElement;if(!document.body.contains(_)){for(var P=_,B=void 0;P;){if(P.nodeType===Node.DOCUMENT_FRAGMENT_NODE){B=P;break}P=P.parentNode}B&&(I=B.activeElement)}_.contains(I)&&(I.blur(),I===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(_){if(_.nodeType===Node.ELEMENT_NODE){var A=_;A!==this._rootElement&&A.hasAttribute("inert")&&this._adoptInertRoot(A),(t.call(A,e)||A.hasAttribute("tabindex"))&&this._manageNode(A)}}},{key:"_manageNode",value:function(_){var A=this._inertManager.register(_,this);this._managedNodes.add(A)}},{key:"_unmanageNode",value:function(_){var A=this._inertManager.deregister(_,this);A&&this._managedNodes.delete(A)}},{key:"_unmanageSubtree",value:function(_){var A=this;l(_,function(I){return A._unmanageNode(I)})}},{key:"_adoptInertRoot",value:function(_){var A=this._inertManager.getInertRoot(_);A||(this._inertManager.setInert(_,!0),A=this._inertManager.getInertRoot(_)),A.managedNodes.forEach(function(I){this._manageNode(I.node)},this)}},{key:"_onMutation",value:function(_,A){_.forEach(function(I){var P=I.target;if(I.type==="childList")i.call(I.addedNodes).forEach(function(F){this._makeSubtreeUnfocusable(F)},this),i.call(I.removedNodes).forEach(function(F){this._unmanageSubtree(F)},this);else if(I.type==="attributes"){if(I.attributeName==="tabindex")this._manageNode(P);else if(P!==this._rootElement&&I.attributeName==="inert"&&P.hasAttribute("inert")){this._adoptInertRoot(P);var B=this._inertManager.getInertRoot(P);this._managedNodes.forEach(function(F){P.contains(F.node)&&B._manageNode(F.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(_){this._savedAriaHidden=_},get:function(){return this._savedAriaHidden}}]),v}(),s=function(){function v(g,_){gi(this,v),this._node=g,this._overrodeFocusMethod=!1,this._inertRoots=new Set([_]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return pi(v,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var _=this._node;this._savedTabIndex!==null?_.setAttribute("tabindex",this._savedTabIndex):_.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete _.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var _=this.node;if(t.call(_,e)){if(_.tabIndex===-1&&this.hasSavedTabIndex)return;_.hasAttribute("tabindex")&&(this._savedTabIndex=_.tabIndex),_.setAttribute("tabindex","-1"),_.nodeType===Node.ELEMENT_NODE&&(_.focus=function(){},this._overrodeFocusMethod=!0)}else _.hasAttribute("tabindex")&&(this._savedTabIndex=_.tabIndex,_.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(_){this._throwIfDestroyed(),this._inertRoots.add(_)}},{key:"removeInertRoot",value:function(_){this._throwIfDestroyed(),this._inertRoots.delete(_),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(_){this._throwIfDestroyed(),this._savedTabIndex=_},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),v}(),o=function(){function v(g){if(gi(this,v),!g)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=g,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),f(g.head||g.body||g.documentElement),g.readyState==="loading"?g.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return pi(v,[{key:"setInert",value:function(_,A){if(A){if(this._inertRoots.has(_))return;var I=new a(_,this);if(_.setAttribute("inert",""),this._inertRoots.set(_,I),!this._document.body.contains(_))for(var P=_.parentNode;P;)P.nodeType===11&&f(P),P=P.parentNode}else{if(!this._inertRoots.has(_))return;var B=this._inertRoots.get(_);B.destructor(),this._inertRoots.delete(_),_.removeAttribute("inert")}}},{key:"getInertRoot",value:function(_){return this._inertRoots.get(_)}},{key:"register",value:function(_,A){var I=this._managedNodes.get(_);return I!==void 0?I.addInertRoot(A):I=new s(_,A),this._managedNodes.set(_,I),I}},{key:"deregister",value:function(_,A){var I=this._managedNodes.get(_);return I?(I.removeInertRoot(A),I.destroyed&&this._managedNodes.delete(_),I):null}},{key:"_onDocumentLoaded",value:function(){var _=i.call(this._document.querySelectorAll("[inert]"));_.forEach(function(A){this.setInert(A,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(_,A){var I=this;_.forEach(function(P){switch(P.type){case"childList":i.call(P.addedNodes).forEach(function(J){if(J.nodeType===Node.ELEMENT_NODE){var Z=i.call(J.querySelectorAll("[inert]"));t.call(J,"[inert]")&&Z.unshift(J),Z.forEach(function(X){this.setInert(X,!0)},I)}},I);break;case"attributes":if(P.attributeName!=="inert")return;var B=P.target,F=B.hasAttribute("inert");I.setInert(B,F);break}},this)}}]),v}();function l(v,g,_){if(v.nodeType==Node.ELEMENT_NODE){var A=v;g&&g(A);var I=A.shadowRoot;if(I){l(I,g);return}if(A.localName=="content"){for(var P=A,B=P.getDistributedNodes?P.getDistributedNodes():[],F=0;F<B.length;F++)l(B[F],g);return}if(A.localName=="slot"){for(var J=A,Z=J.assignedNodes?J.assignedNodes({flatten:!0}):[],X=0;X<Z.length;X++)l(Z[X],g);return}}for(var j=v.firstChild;j!=null;)l(j,g),j=j.nextSibling}function f(v){if(!v.querySelector("style#inert-style, link#inert-style")){var g=document.createElement("style");g.setAttribute("id","inert-style"),g.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,v.appendChild(g)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var b=new o(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(g){b.setInert(this,g)}})}})();class Ra{constructor(t,e,a,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=a,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:Ye,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},st(this.options,e),st(this.data,t),this._initLayout(),this._initEvents()}show(){this.animator=Xt(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e,a){var s,o=this.options.slide_padding_lr,l=this.options.slide_padding_lr;t?this.options.width=t:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,ue&&this.options.width<=this.options.skinny_size?(o=0,l=0,s=this.options.width):a=="landscape"||this.options.width<=this.options.skinny_size&&(o=50,l=50,s=this.options.width-o-l),this._el.content.style.paddingLeft=o+"px",this._el.content.style.paddingRight=l+"px",this._el.content.style.width=s+"px",e?this.options.height=e:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),a):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,a):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,a):this._media.updateDisplay(s/2,this.options.height,a)),this._updateBackgroundDisplay()}loadMedia(){var t=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){t._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(Rt(this.data.display_date).length>0)return this.data.display_date;var t="";return this.has.title||(this.data.end_date&&(t=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=this.data.start_date.getDisplayDate(this.getLanguage())+t)),t}_initLayout(){if(this._el.container=D("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=D("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=D("div","tl-slide-content-container",this._el.scroll_container),this._el.content=D("div","tl-slide-content",this._el.content_container),this._el.background=D("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var t=Ge(this.data.background,!0);t&&(this._background_media=new t.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=Ge(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new Aa(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(t){t?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Dt(Ra,Qt,At,Jt);class Si{constructor(t,e,a){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,st(this.options,e),st(this.data,t),this._el.container=Ee("tl-slidenav-"+this.options.direction),ue&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),a&&a.appendChild(this._el.container)}update(t){var e={title:"",description:"",date:t.getFormattedDate()};t.data.text&&t.data.text.headline&&(e.title=t.data.text.headline),this._update(e)}setColor(t){t?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(t){this.data=st(this.data,t);const e=ve(this.data.title);this._el.title.innerHTML=e;const a=ve(this.data.date);this._el.description.innerHTML=a,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${e}, ${a}`)}_initLayout(){this._el.content_container=D("div","tl-slidenav-content-container",this._el.container),this._el.icon=D("div","tl-slidenav-icon",this._el.content_container),this._el.title=D("div","tl-slidenav-title",this._el.content_container),this._el.description=D("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Y.addListener(this._el.container,"click",this._onMouseClick,this)}}Dt(Si,Jt,At);class Oa{constructor(t,e,a,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:ke,dragging:!0,trackResize:!0},typeof t=="object"?(this._el.container=t,this.options.id=de(6,"tl")):(this.options.id=t,this._el.container=Ae(t)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,st(this.options,a),st(this.data,e)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)}_createSlide(t,e,a){var s=new Ra(t,this.options,e,this.getLanguage());this._addSlide(s),a<0?this._slides.push(s):this._slides.splice(a,0,s)}_createSlides(t){for(var e=0;e<t.length;e++)t[e].unique_id==""&&(t[e].unique_id=de(6,"tl-slide")),this._createSlide(t[e],!1,-1)}_removeSlide(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideRemoved,this),t.off("background_change",this._onBackgroundChange)}_destroySlide(t){this._removeSlide(this._slides[t]),this._slides.splice(t,1)}_findSlideIndex(t){var e=t;return(typeof t=="string"||t instanceof String)&&(e=ba(t,this._slides,"unique_id")),e}updateDisplay(t,e,a,s){var o,l;typeof s>"u"?l=this.options.layout:l=s,this.options.layout=l,t?this.options.width=t:this.options.width=this._el.container.offsetWidth,e?this.options.height=e:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,o=this.options.height/2,this._nav.next.setPosition({top:o}),this._nav.previous.setPosition({top:o});for(var f=0;f<this._slides.length;f++)this._slides[f].updateDisplay(this.options.width,this.options.height,l),this._slides[f].setPosition({left:this.slide_spacing*f,top:0});this.goToId(this.current_id,!0,!0)}createSlide(t,e){this._createSlide(t,!1,e)}createSlides(t){this._createSlides(t)}destroySlide(t){this._destroySlide(t)}destroySlideId(t){this.destroySlide(this._findSlideIndex(t))}goTo(t,e,a){t=parseInt(t),isNaN(t)&&(t=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var o=0;o<this._slides.length;o++)this._slides[o].setActive(!1);t<this._slides.length&&t>=0&&(this.current_id=this._slides[t].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),e?(this._el.slider_container.style.left=-(this.slide_spacing*t)+"px",this._onSlideChange(a)):this.animator=Xt(this._el.slider_container,{left:-(this.slide_spacing*t)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(a)}),this._slides[t].setActive(!0),this._slides[t+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[t+1])):this.showNav(this._nav.next,!1),this._slides[t-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[t-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(t)},this.options.duration))}goToId(t,e,a){this.goTo(this._findSlideIndex(t),e,a)}preloadSlides(t){this._slides[t+1]&&(this._slides[t+1].loadMedia(),this._slides[t+1].scrollToTop()),this._slides[t+2]&&(this._slides[t+2].loadMedia(),this._slides[t+2].scrollToTop()),this._slides[t-1]&&(this._slides[t-1].loadMedia(),this._slides[t-1].scrollToTop()),this._slides[t-2]&&(this._slides[t-2].loadMedia(),this._slides[t-2].scrollToTop())}next(){var t=this._findSlideIndex(this.current_id);t+1<this._slides.length?this.goTo(t+1):this.goTo(t)}previous(){var t=this._findSlideIndex(this.current_id);t-1>=0?this.goTo(t-1):this.goTo(t)}showNav(t,e){this.options.width<=500&&ue?t.hide():e?t.show():t.hide()}changeBackground(t){var e={r:256,g:256,b:256};t.color_value&&t.color_value!=""?(e=va(t.color_value),e||(tt("Invalid color value "+t.color_value),e=this.options.default_bg_color)):(e=this.options.default_bg_color,t.color_value="rgb("+e.r+" , "+e.g+", "+e.b+")"),e.r+""+e.g+e.b,this._el.background.style.backgroundImage="none",t.color_value?this._el.background.style.backgroundColor=t.color_value:this._el.background.style.backgroundColor="transparent",e.r<255||e.g<255||e.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var t=this.options.layout,e=0;e<this._slides.length;e++)this._slides[e].updateDisplay(this.options.width,this.options.height,t),this._slides[e].setPosition({left:this.slide_spacing*e,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new Si({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new Si({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=D("div","tl-slider-container-mask",this._el.container),this._el.background=D("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=D("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=D("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",Ut&&(this._swipable=new Ni(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new Ke(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(t){var e=this._findSlideIndex(this.current_id),a=this._slides[e].getBackground();this.changeBackground(t),this.fire("colorchange",a)}_onMessageClick(t){this._message.hide()}_onSwipeNoDirection(t){this.goToId(this.current_id)}_onNavigation(t){t.direction=="next"||t.direction=="left"?this.next():(t.direction=="previous"||t.direction=="right")&&this.previous(),this.fire("nav_"+t.direction,this.data)}_onSlideAdded(t){tt("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(t){this.fire("slideRemoved",this.data)}_onSlideChange(t){t||this.fire("change",{unique_id:this.current_id})}_onMouseClick(t){}_fireMouseEvent(t){if(this._loaded){var e=t.type;e=e==="mouseenter"?"mouseover":e==="mouseleave"?"mouseout":e,this.hasEventListeners(e)&&(e==="contextmenu"&&Y.preventDefault(t),this.fire(e,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Dt(Oa,Qt,At);class Pa{constructor(t,e,a,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=Ae(t),e&&(this._el.parent=e),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:ke,menubar_default_y:0},this.animator={},this.setLanguage(s),st(this.options,a),this._initLayout(),this._initEvents()}show(t){this.options.duration}hide(t){}toogleZoomIn(t){t?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(t){t?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(t){const e=t.minor;if(!e.length){this.data.visible_ticks_dates={};return}const s=e[0].date.getFullYear(),l=e[e.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:l},this._updateZoomAriaLabels()}setSticky(t){this.options.menubar_default_y=t}setColor(t){t?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(t,e,a,s){this._updateDisplay(t,e,a,s)}_onButtonZoomIn(t){this.fire("zoom_in",t)}_onButtonZoomOut(t){this.fire("zoom_out",t)}_onButtonForwardToEnd(t){this.fire("forward_to_end",t)}_onButtonBackToStart(t){this.fire("back_to_start",t)}_initLayout(){this._el.button_zoomin=Ee("tl-menubar-button",this._el.container),this._el.button_zoomout=Ee("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Ee("tl-menubar-button",this._el.container),this._el.button_backtostart=Ee("tl-menubar-button",this._el.container),ue&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Y.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Y.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Y.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Y.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(t,e,a){t&&(this.options.width=t),e&&(this.options.height=e)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Dt(Pa,Jt,At,Qt);let Di=null;if(document){let i=document.getElementsByTagName("script");i&&i.length>0&&(Di=i[i.length-1].src)}function Yn(i){return function(t){if(i.config){var e=t.key,a=i._getSlideIndex(self.current_id),s=i.config.events.length-1,o=i.config.title?s+1:s,l=0;e=="ArrowLeft"?a!=l&&i.goToPrev():e=="ArrowRight"&&a!=o&&i.goToNext()}}}class Ha{constructor(t,e,a){if(a||(a={}),this.ready=!1,this._el={container:Ae(t),storyslider:{},timenav:{},menubar:{}},a.lang&&!a.language&&(a.language=a.lang),this.language=Ai,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:ke,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new Ke(this._el.container,{message_class:"tl-message-full"}),typeof a.default_bg_color=="string"){var s=va(a.default_bg_color);s?a.default_bg_color=s:(delete a.default_bg_color,tt("Invalid default background color. Ignoring."))}st(this.options,a),this.options.script_path||(this.options.script_path=this.determineScriptPath()),a.soundcite&&this.on("ready",()=>{tt("Loading Soundcite resources "),mi("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),ce("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",Yn(this)),window.addEventListener("resize",(function(o){this.updateDisplay()}).bind(this)),this.options.debug&&ss(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(e)}_loadStyles(){let t=null,e=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))t=this.options.font;else if(this.options.font){let a="../css/fonts/font."+this.options.font.toLowerCase()+".css";t=new URL(a,this.options.script_path).toString()}if(t&&mi(t),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))e=this.options.theme;else if(this.options.theme){let a="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";e=new URL(a,this.options.script_path).toString()}e&&mi(e)}_loadLanguage(t){try{var e=this.options.language,a=this.options.script_path;ws(e,a).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${e}`),this._initData(t)})}catch(s){this.showMessage(this._translateError(s))}}_initData(t){typeof t=="string"?un(t,{callback:(function(e){this.setConfig(e)}).bind(this),sheets_proxy:this.options.sheets_proxy}):he==t.constructor?this.setConfig(t):this.setConfig(new he(t))}_translateError(t){return t.hasOwnProperty("stack")&&tt(t.stack),t.message_key?this._(t.message_key)+(t.detail?" ["+t.detail+"]":""):t}showMessage(t){this.message?this.message.updateMessage(t):(tt("No message display available."),tt(t))}determineScriptPath(){let t=null;if(Di)t=Di;else{let e=document.getElementById("timeline-script-tag");e&&(t=e.src)}if(!t){let e=document.getElementsByTagName("script");for(let a=e.length-1;a>=0;a--)if(e[a].src){t=e[a].src;break}}return t?t.substr(0,t.lastIndexOf("/")+1):""}setConfig(t){if(this.config=t,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(o){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(o))}else{for(var e=[],a=0,s=this.config.getErrors();a<s.length;a++)e.push(this._translateError(s[a]));this.showMessage("<strong>"+this._("error")+":</strong> "+e.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let t=(a,s)=>{a.reduce((o,l)=>o||l.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(t.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=D("div","tl-timenav",this._el.container),this._el.menubar=D("div","tl-menubar",this._el.container),this._el.storyslider=D("div","tl-storyslider",this._el.container)):(this._el.storyslider=D("div","tl-storyslider",this._el.container),this._el.timenav=D("div","tl-timenav",this._el.container),this._el.menubar=D("div","tl-menubar",this._el.container)),this._el.attribution=D("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new Ca(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new Oa(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new Pa(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay(this._timenav.options.height,!0,2e3)}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(t){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._timenav.goToId(this.current_id),this._onChange(t))}_onTimeNavChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._storyslider.goToId(this.current_id),this._onChange(t))}_onZoomToggle(t){t.zoom=="in"?this._menubar.toogleZoomIn(t.show):t.zoom=="out"&&this._menubar.toogleZoomOut(t.show)}_onChange(t){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(t){this._menubar.changeVisibleTicks(t.visible_ticks)}_onForwardToEnd(t){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(t){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(t){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(t){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(t){this.fire("nav_next",t)}_onStorySliderPrevious(t){this.fire("nav_previous",t)}_updateDisplay(t,e,a){var s=this.options.duration,o=this.options.base_class,l=0;a&&(s=a),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(o+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(o+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",Ut&&(this.options.layout=is()),ue?(o+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(t,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(t),this.options.layout=="portrait"?o+=" tl-layout-portrait":o+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?l=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:l=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),e?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Xt(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Le}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Xt(this._el.menubar,{top:l+"px",duration:s/2,easing:Le})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=l+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,e),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,e,this.options.layout),this.language.direction=="rtl"&&(o+=" tl-rtl"),this._el.container.className=o}_calculateTimeNavHeight(t,e){var a=0;return t?a=t:(this.options.timenav_height_percentage||e)&&(e?a=Math.round(this.options.height/100*e):a=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),a<this.options.timenav_height_min&&(a=this.options.timenav_height_min),a=a-this.options.marker_padding*2,a}_validateOptions(){for(var t=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],e=0;e<t.length;e++){var a=t[e],s=this.options[a];let o=!0;typeof s=="number"?o=s==parseInt(s):typeof s=="string"&&(o=s.match(/^\s*(\-?\d+)?\s*$/)),o||this.config.logError({message_key:"invalid_integer_option",detail:a})}}_getSlideIndex(t){if(this.config){if(this.config.title&&this.config.title.unique_id==t)return 0;for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return this.config.title?e+1:e}return-1}_getEventIndex(t){for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return e;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),as(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let t=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&t.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(t){if(t){var e="#event-"+t.toString();window.history.replaceState(null,"Browsing TimelineJS",e),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+t.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(t){this._timenav.setZoom(t)}goToId(t){this.current_id!=t&&(this.current_id=t,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(t){if(!(t<0))try{this.config.title?t===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[t-1].unique_id):this.goToId(this.config.events[t].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var t=this.config.events.length-1;this.goTo(this.config.title?t+1:t)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(t){var e=this.config.addEvent(t),a=this._getEventIndex(e),s=this.config.events[a];this._storyslider.createSlide(s,this.config.title?a+1:a),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,a),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:e})}remove(t){if(t>=0&&t<this.config.events.length){this.config.events[t].unique_id==this.current_id&&(t<this.config.events.length-1?this.goTo(t+1):this.goTo(t-1));var e=this.config.events.splice(t,1);delete this.config.event_dict[e[0].unique_id],this._storyslider.destroySlide(this.config.title?t+1:t),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(t),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:e[0].unique_id})}}removeId(t){this.remove(this._getEventIndex(t))}getData(t){if(this.config.title){if(t==0)return this.config.title;if(t>0&&t<=this.config.events.length)return this.config.events[t-1]}else if(t>=0&&t<this.config.events.length)return this.config.events[t];return null}getDataById(t){return this.getData(this._getSlideIndex(t))}getSlide(t){return t>=0&&t<this._storyslider._slides.length?this._storyslider._slides[t]:null}getSlideById(t){return this.getSlide(this._getSlideIndex(t))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():tt("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(t){ce(`https://www.googletagmanager.com/gtag/js?id=${t}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",t)}_initAnalytics(){let t=this.options.ga_measurement_id||this.options.ga_property_id||null;if(t){this._initGoogleAnalytics(t);var e=this.options.track_events;for(let s=0;s<e.length;s++){var a=e[s];this.addEventListener(a,function(o){gtag("event",o.type)})}}}}Dt(Ha,Qt,At);const nt="Hardware",kt="Operating Systems",Ct="Programming Languages",Fe="Softwares and Libraries",ee="Web Frontend",ie="Databases",vi="Deep Learning & 3D",Yt="Companies",ae="Network Protocols",Zt="Misc.",Jn=$a({__name:"Timeline",setup(i){const t=Va(null),e=[{day:"1939",group:nt,name:"Bombe"},{day:"1945-06-30",group:Zt,name:"von Neumann architecture"},{day:"1946-02-15",group:nt,name:"ENIAC"},{day:"1947",group:Ct,name:"Assembly language"},{day:"1951-03-31",group:nt,name:"UNIVAC"},{day:"1956-09-14",group:nt,name:"IBM 350 HDD"},{day:"1957",group:Ct,name:"Fortran"},{day:"1957",group:Yt,name:"Digital Equipment Corp."},{day:"1960-11",group:nt,name:"DEC PDP-1"},{day:"1960",group:Zt,name:"Quick Sort"},{day:"1961",group:Zt,name:"Compatible Time-Sharing System"},{day:"1964-04-07",group:Zt,name:"IBM System/360"},{day:"1965-03-22",group:nt,name:"DEC PDP-8"},{day:"1968-07-18",group:Yt,name:"Intel"},{day:"1969",group:kt,name:"UNIX"},{day:"1969-05-01",group:Yt,name:"AMD"},{day:"1969-07-20",group:nt,name:"Apollo 11"},{day:"1969-11-21",group:ae,name:"ARPANET"},{day:"1970",group:Ct,name:"Pascal"},{day:"1971-11-15",group:nt,name:"Intel 4004"},{day:"1972",group:Ct,name:"C"},{day:"1973-03-05",group:ae,name:"Telnet"},{day:"1973-05-22",group:ae,name:"Ethernet"},{day:"1974",group:Zt,name:"Xerox PARC Alto GUI"},{day:"1974-04-01",group:nt,name:"Intel 8008"},{day:"1975-04-04",group:Yt,name:"Microsoft"},{day:"1976",group:nt,name:"Apple-1"},{day:"1978-03-09",group:kt,name:"BSD"},{day:"1979",group:ie,name:"Oracle"},{day:"1981",group:nt,name:"IBM PC"},{day:"1981",group:kt,name:"MS-DOS"},{day:"1983-01-01",group:ae,name:"TCP/IP (Internet)"},{day:"1983-01-19",group:nt,name:"Apple Lisa"},{day:"1982",group:kt,name:"HP-UX"},{day:"1982-02-24",group:Zt,name:"Sun Microsystems"},{day:"1983-06-07",group:ie,name:"DB2"},{day:"1983-07-15",group:nt,name:"Nintendo Entertainment System"},{day:"1983-09-27",group:kt,name:"GNU"},{day:"1983-10",group:Fe,name:"Word"},{day:"1984-02-01",group:Yt,name:"Dell"},{day:"1984-01-24",group:nt,name:"Macintosh"},{day:"1984",group:Ct,name:"Verilog, Matlab"},{day:"1985",group:Ct,name:"C++"},{day:"1985-04-26",group:nt,name:"ARM"},{day:"1987-02-21",group:Yt,name:"TSMC"},{day:"1987-12-18",group:Ct,name:"Perl"},{day:"1986-02",group:kt,name:"IBM AIX"},{day:"1988",group:kt,name:"POSIX"},{day:"1990-02-19",group:Fe,name:"Photoshop"},{day:"1991",group:ae,name:"HTTP/0.9"},{day:"1991-02-20",group:Ct,name:"Python"},{day:"1991-09-17",group:kt,name:"GNU/Linux"},{day:"1992-06",group:kt,name:"Solaris"},{day:"1993-03-22",group:nt,name:"Intel Pentium"},{day:"1993-09-15",group:kt,name:"Debian"},{day:"1994-10-13",group:ee,name:"Netscape"},{day:"1994-12-03",group:nt,name:"PlayStation"},{day:"1995-08-24",group:ee,name:"Internet Explorer"},{day:"1995-08-24",group:kt,name:"Windows 95"},{day:"1995",group:Ct,name:"Java, JavaScript, PHP"},{day:"1995-05-23",group:ie,name:"MySQL"},{day:"1995-07",group:ae,name:"Secure Shell (SSH)"},{day:"1995-07-16",group:Yt,name:"Amazon"},{day:"1996-05",group:ae,name:"HTTP/1.0 (RFC1945)"},{day:"1996-07-08",group:ie,name:"PostgreSQL"},{day:"1996-12-25",group:Ct,name:"Ruby"},{day:"1997-06-05",group:kt,name:"Symbian"},{day:"1998-09-04",group:Yt,name:"Google"},{day:"1999-10-11",group:nt,name:"GeForce 256"},{day:"2000-03-06",group:nt,name:"AMD Athlon 1Ghz"},{day:"2000-05",group:ae,name:"HTTPS (RFC2818)"},{day:"2000-08-17",group:ie,name:"SQLite"},{day:"2001-01-15",group:Zt,name:"Wikipedia"},{day:"2001-03-24",group:kt,name:"OS X 10"},{day:"2001-10-25",group:kt,name:"Windows XP"},{day:"2001-11-15",group:nt,name:"Xbox"},{day:"2003-06",group:Fe,name:"Spring Framework"},{day:"2004-10-20",group:kt,name:"Ubuntu"},{day:"2004-02-04",group:Yt,name:"Facebook"},{day:"2004-11-09",group:ee,name:"Firefox"},{day:"2005-04-07",group:Zt,name:"Git"},{day:"2005-07-21",group:Fe,name:"Django"},{day:"2006-04-01",group:ie,name:"Hadoop"},{day:"2006-01",group:nt,name:"Intel Core Duo"},{day:"2006-08-26",group:ee,name:"jQuery"},{day:"2007",group:nt,name:"1TB HDD, iPhone"},{day:"2007-07-23",group:vi,name:"CUDA"},{day:"2007-07-29",group:kt,name:"iOS"},{day:"2007-10-19",group:Zt,name:"GitHub"},{day:"2008-09-02",group:ee,name:"Chrome"},{day:"2008-09-23",group:kt,name:"Android"},{day:"2009-02-11",group:ie,name:"MongoDB"},{day:"2009-04-10",group:ie,name:"Redis"},{day:"2009-05-27",group:Ct,name:"Node.js"},{day:"2012-02-29",group:nt,name:"Raspberry Pi"},{day:"2012-03",group:Ct,name:"Go"},{day:"2012-10-01",group:Ct,name:"TypeScript"},{day:"2013-05-29",group:ee,name:"React"},{day:"2014-02",group:ee,name:"Vue.js"},{day:"2015-04-10",group:nt,name:"Apple Watch"},{day:"2015-05-15",group:Ct,name:"Rust"},{day:"2015-09-14",group:ee,name:"Angular"},{day:"2015-11-09",group:vi,name:"TensorFlow"},{day:"2016-09",group:vi,name:"PyTorch"},{day:"2017-03-03",group:nt,name:"Nintendo Switch"},{day:"2020-11-10",group:nt,name:"Apple M1"},{day:"2022-04-20",group:nt,name:"AMD Ryzen 5800X3D"}];function a(o){const l=/^\d{4}$/,f=/^\d{4}-\d{2}$/,b=/^\d{4}-\d{2}-\d{2}$/;if(l.test(o))return new Date(Date.UTC(+o,0,1));if(f.test(o)){const[v,g]=o.split("-").map(Number);return new Date(Date.UTC(v,g-1,1))}else return b.test(o)?new Date(o+"T00:00:00Z"):new Date(o)}const s=e.map(o=>{const l=a(o.day);return{start_date:{year:l.getFullYear(),month:l.getMonth()+1,day:l.getDay()},text:{headline:o.name},group:o.group}});return Ya(()=>{new Ha(t.value,{events:s})}),(o,l)=>(Za(),Xa("div",{ref_key:"timeline",ref:t},null,512))}});export{Jn as default};
